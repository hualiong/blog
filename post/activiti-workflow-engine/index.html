<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Activiti å·¥ä½œæµå¼•æ“ | Hualiang&#39;s Blog</title>
<link rel="shortcut icon" href="https://hualiang.online/favicon.ico?v=1762159937976">
<link href="https://cdn.staticfile.net/remixicon/2.3.0/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://hualiang.online/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="Activiti å·¥ä½œæµå¼•æ“ | Hualiang&#39;s Blog - Atom Feed" href="https://hualiang.online/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="ä½ å¬è¿‡å·¥ä½œæµå¼•æ“å—ï¼ŸğŸ¤”
æˆ‘åœ¨å­¦ä¹  SSM æ¡†æ¶è¿›è¡Œé¡¹ç›®å®æˆ˜æ—¶ï¼Œè·Ÿç€æ•™ç¨‹æ¥è§¦åˆ°äº†å·¥ä½œæµå¼•æ“ï¼Œæ‰€ä»¥å€Ÿæ­¤æœºä¼šè®°å½•ä¸€ä¸‹ã€‚

ä¸€ã€äº†è§£å·¥ä½œæµ
1ã€ä»€ä¹ˆæ˜¯å·¥ä½œæµ
å·¥ä½œæµï¼ˆWorkflowï¼‰ï¼Œå°±æ˜¯é€šè¿‡è®¡ç®—æœºå¯¹ä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–æ‰§è¡Œç®¡ç†ã€‚å®ƒä¸»è¦è§£å†³çš„æ˜¯â€œä½¿åœ¨..." />
    <meta name="keywords" content="Java" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://hualiang.online">
  <img class="avatar" src="https://hualiang.online/images/avatar.png?v=1762159937976" alt="">
  </a>
  <h1 class="site-title">
    Hualiang&#39;s Blog
  </h1>
  <p class="site-description">
    <i>Unless I don't want to win, nobody can make me lose.</i><br/><br/>I always believe å¤©é“é…¬å‹¤
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/hualiong" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
        <a href="https://twitter.com/huoliong" target="_blank">
          <i class="ri-twitter-line"></i>
        </a>
      
    
      
        <a href="https://weibo.com" target="_blank">
          <i class="ri-weibo-line"></i>
        </a>
      
    
      
        <a href="https://zhuanlan.zhihu.com" target="_blank">
          <i class="ri-zhihu-line"></i>
        </a>
      
    
      
        <a href="https://www.facebook.com" target="_blank">
          <i class="ri-facebook-line"></i>
        </a>
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              Activiti å·¥ä½œæµå¼•æ“
            </h2>
            <div class="post-info">
              <span>
                2023-11-01
              </span>
              <span>
                43 min read
              </span>
              
                <a href="https://hualiang.online/tag/6ysHJUyVK/" class="post-tag">
                  # Java
                </a>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content" v-pre>
                <p>ä½ å¬è¿‡å·¥ä½œæµå¼•æ“å—ï¼ŸğŸ¤”<br>
æˆ‘åœ¨å­¦ä¹  SSM æ¡†æ¶è¿›è¡Œé¡¹ç›®å®æˆ˜æ—¶ï¼Œè·Ÿç€æ•™ç¨‹æ¥è§¦åˆ°äº†å·¥ä½œæµå¼•æ“ï¼Œæ‰€ä»¥å€Ÿæ­¤æœºä¼šè®°å½•ä¸€ä¸‹ã€‚</p>
<!-- more -->
<h1 id="ä¸€-äº†è§£å·¥ä½œæµ">ä¸€ã€äº†è§£å·¥ä½œæµ</h1>
<h2 id="1-ä»€ä¹ˆæ˜¯å·¥ä½œæµ">1ã€ä»€ä¹ˆæ˜¯å·¥ä½œæµ</h2>
<p><strong>å·¥ä½œæµï¼ˆWorkflowï¼‰</strong>ï¼Œå°±æ˜¯é€šè¿‡è®¡ç®—æœºå¯¹ä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–æ‰§è¡Œç®¡ç†ã€‚å®ƒä¸»è¦è§£å†³çš„æ˜¯â€œä½¿åœ¨å¤šä¸ªå‚ä¸è€…ä¹‹é—´æŒ‰ç…§æŸç§<strong>é¢„å®šä¹‰çš„è§„åˆ™</strong>è‡ªåŠ¨è¿›è¡Œä¼ é€’æ–‡æ¡£ã€ä¿¡æ¯æˆ–ä»»åŠ¡çš„è¿‡ç¨‹ï¼Œä»è€Œå®ç°æŸä¸ªé¢„æœŸçš„ä¸šåŠ¡ç›®æ ‡ï¼Œæˆ–è€…ä¿ƒä½¿æ­¤ç›®æ ‡çš„å®ç°â€ã€‚**é€šä¿—æ¥è®²ï¼Œå°±æ˜¯ä¸šåŠ¡ä¸Šä¸€ä¸ªå®Œæ•´çš„å®¡æ‰¹æµç¨‹ã€‚**ä¾‹å¦‚å‘˜å·¥çš„è¯·å‡ï¼Œå‡ºå·®ï¼Œå¤–å‡ºé‡‡è´­ï¼ŒåˆåŒå®¡æ ¸ç­‰ç­‰ï¼Œè¿™äº›è¿‡ç¨‹ï¼Œéƒ½æ˜¯ä¸€ä¸ªå·¥ä½œæµã€‚</p>
<h2 id="2-å·¥ä½œæµå¼•æ“">2ã€å·¥ä½œæµå¼•æ“</h2>
<p>å¯¹äºå·¥ä½œæµçš„å¤„ç†ï¼Œå¦‚æœé‡‡ç”¨åŸå§‹çš„æ–¹å¼ï¼Œæˆ‘ä»¬éœ€è¦æ‹¿ç€å„ç§æ–‡ä»¶åˆ°å„ä¸ªè´Ÿè´£äººé‚£é‡Œå»ç­¾å­—ï¼Œéœ€è¦åœ¨å¤šä¸ªéƒ¨é—¨ä¹‹é—´ä¸æ–­å®¡æ‰¹ï¼Œè¿™ç§æ–¹å¼è´¹æ—¶è´¹åŠ›ã€‚è€Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©è½¯ä»¶ç³»ç»Ÿæ¥ååŠ©æˆ‘ä»¬å¤„ç†è¿™äº›å®¡æ‰¹æµç¨‹ï¼Œè¿™æ ·å°±å‡ºç°äº†å·¥ä½œæµç³»ç»Ÿï¼Œä½¿ç”¨å·¥ä½œæµç³»ç»Ÿåå¯ä»¥æå¤§çš„æé«˜å·¥ä½œæ•ˆç‡ã€‚</p>
<p>åœ¨å­¦ä¹ å·¥ä½œæµçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬è‚¯å®šçœ‹åˆ°è¿‡è¿™ä¸ªæ¨¡å‹:å¡«å†™è¯·å‡å•-&gt;éƒ¨é—¨ç»ç†å®¡æ‰¹-&gt;æ€»ç»ç†å®¡æ‰¹-&gt;äººäº‹å¤‡æ¡ˆã€‚</p>
<p>ï¼ˆ1ï¼‰è¦å®ç°ä¸Šè¿°çš„æµç¨‹ï¼Œæˆ‘ä»¬è‡ªå·±å¯ä»¥é€šè¿‡å­—æ®µæ ‡è¯†æ¥å®ç°è¿™ä¸ªå®¡æ‰¹æ•ˆæœï¼Œåœ¨ä¸šåŠ¡è¡¨ä¸­åŠ ä¸ªå­—æ®µï¼Œæ¯”å¦‚å¡«å†™è¯·å‡å•ç”¨1æ ‡è¯†ï¼Œéƒ¨é—¨ç»ç†ç”¨2æ ‡è¯†ï¼Œæ€»ç»ç†ç”¨3æ ‡è¯†ï¼Œäººäº‹å¤‡æ¡ˆç”¨4æ ‡è¯†ï¼Œå¥½åƒçœ‹èµ·æ¥æ²¡å•¥é—®é¢˜ï¼Œä¹Ÿå®ç°äº†å®¡æ‰¹æ•ˆæœã€‚å¯æ˜¯ä¸€æ—¦æˆ‘ä»¬çš„æµç¨‹å‡ºç°äº†å˜åŒ–ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦æ”¹åŠ¨æˆ‘ä»¬çš„ä»£ç äº†ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸å¯å–çš„ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰ä¸“ä¸šçš„æ–¹å¼æ¥å®ç°å·¥ä½œæµçš„ç®¡ç†å‘¢ï¼Ÿå¹¶ä¸”å¯ä»¥åšåˆ°ä¸šåŠ¡æµç¨‹å˜åŒ–ä¹‹åï¼Œæˆ‘ä»¬çš„ç¨‹åºå¯ä»¥ä¸ç”¨æ”¹å˜ï¼Œå¦‚æœå¯ä»¥å®ç°è¿™æ ·çš„æ•ˆæœï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ä¸šåŠ¡ç³»ç»Ÿçš„é€‚åº”èƒ½åŠ›å°±å¾—åˆ°äº†æå¤§æå‡ã€‚åœ¨è¿™æ ·çš„èƒŒæ™¯ä¸‹ï¼Œå°±å‡ºç°äº†<strong>å·¥ä½œæµå¼•æ“</strong>ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆä½¿ç”¨å·¥ä½œæµå¼•æ“ï¼Œèƒ½å®ç°ä¸šåŠ¡æµç¨‹æ”¹å˜ï¼Œä¸ç”¨ä¿®æ”¹ä»£ç ï¼Œæµç¨‹è¿˜èƒ½è‡ªåŠ¨æ¨è¿›ï¼Ÿ</strong></p>
<p>ï¼ˆ1ï¼‰æˆ‘ä»¬å…ˆæ¥è¯´è¯´ä¸ºä»€ä¹ˆæµç¨‹æ”¹å˜ï¼Œä¸ç”¨ä¿®æ”¹ä»£ç ï¼šæˆ‘ä»¬çš„å·¥ä½œæµå¼•æ“éƒ½å®ç°äº†ä¸€ä¸ªè§„èŒƒï¼Œè¿™ä¸ªè§„èŒƒè¦æ±‚æˆ‘ä»¬çš„æµç¨‹ç®¡ç†ä¸çŠ¶æ€å­—æ®µæ— å…³ï¼Œå§‹ç»ˆéƒ½æ˜¯è¯»å–ä¸šåŠ¡æµç¨‹å›¾çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚å½“ä¸šåŠ¡æ›´æ–°çš„æ—¶å€™æˆ‘ä»¬åªéœ€è¦æ›´æ–°ä¸šåŠ¡æµç¨‹å›¾å°±è¡Œäº†ã€‚è¿™å°±å®ç°äº†ä¸šåŠ¡æµç¨‹æ”¹å˜ï¼Œä¸ç”¨ä¿®æ”¹ä»£ç ã€‚</p>
<p>ï¼ˆ2ï¼‰å†æ¥è¯´è¯´æµç¨‹è‡ªåŠ¨æ¨è¿›ï¼Œè¿™ä¸ªåŸç†å°±æ›´ç®€å•äº†ï¼Œå°±æ‹¿ä¸Šé¢çš„è¯·å‡æ¨¡å‹æ¥è¯´ï¼Œå·¥ä½œæµå¼•æ“ä¼šç”¨ä¸€å¼ è¡¨æ¥è®°å½•å½“å‰å¤„åœ¨çš„èŠ‚ç‚¹ã€‚å½“å¡«å†™å®Œè¯·å‡å•åè‚¯å®šæ˜¯è¦è½®åˆ°éƒ¨é—¨ç»ç†æ¥å®¡æ‰¹äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€æ—¦å®Œæˆäº†è¯·å‡å•å¡«å†™é‚£ä¹ˆè¿™æ¡è®°å½•å°†ä¼šè¢«ä»è¿™å¼ è¡¨åˆ é™¤æ‰ï¼Œå¹¶ä¸”ä¼šæŠŠä¸‹ä¸€ä¸ªèŠ‚ç‚¹éƒ¨é—¨ç»ç†çš„ä¿¡æ¯æ’å…¥åˆ°è¿™å¼ è¡¨ä¸­ï¼Œå½“æˆ‘ä»¬ç”¨éƒ¨é—¨ç»ç†çš„ä¿¡æ¯å»è¿™å¼ è¡¨ä¸­æŸ¥è¯¢çš„æ—¶å€™å°±èƒ½æŸ¥å‡ºéƒ¨é—¨ç»ç†ç›¸å…³çš„å®¡æ‰¹çš„ä¿¡æ¯äº†ï¼Œä»¥æ­¤ç±»æ¨ï¼Œè¿™æ ·å±‚å±‚é€’è¿›ï¼Œå°±å®ç°äº†æµç¨‹çš„è‡ªåŠ¨é€’äº¤äº†ã€‚</p>
<h2 id="3-å¸¸è§å·¥ä½œæµå¼•æ“">3ã€å¸¸è§å·¥ä½œæµå¼•æ“</h2>
<p>ä¸»æµçš„æ¡†æ¶æœ‰ï¼š<strong>Activiti</strong>ã€jBPMã€Camunda ã€Flowable ã€è¿˜æœ‰æˆ‘ä»¬å›½äº§çš„ç›˜å¤BPMã€äº‘ç¨‹</p>
<h2 id="4-activiti7æ¦‚è¿°">4ã€Activiti7æ¦‚è¿°</h2>
<h3 id="41-activitiä»‹ç»">4.1ã€Activitiä»‹ç»</h3>
<p>activitiæ˜¯ä¸€ä¸ªå·¥ä½œæµå¼•æ“ï¼Œå¯ä»¥å°†ä¸šåŠ¡ç³»ç»Ÿä¸­å¤æ‚çš„ä¸šåŠ¡æµç¨‹æŠ½å–å‡ºæ¥ï¼Œä½¿ç”¨ä¸“é—¨çš„å»ºæ¨¡è¯­è¨€BPMNè¿›è¡Œå®šä¹‰ï¼Œä¸šåŠ¡æµç¨‹æŒ‰ç…§é¢„å…ˆå®šä¹‰çš„æµç¨‹è¿›è¡Œæ‰§è¡Œã€‚å®ç°äº†ç³»ç»Ÿçš„æµç¨‹ç”±activitiè¿›è¡Œç®¡ç†ï¼Œå‡å°‘ä¸šåŠ¡ç³»ç»Ÿç”±äºæµç¨‹å˜æ›´è¿›è¡Œç³»ç»Ÿå‡çº§æ”¹é€ çš„å·¥ä½œæµé‡ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å¥å£®æ€§ï¼ŒåŒæ—¶ä¹Ÿå‡å°‘äº†ç³»ç»Ÿå¼€å‘ç»´æŠ¤æˆæœ¬ã€‚</p>
<p>å®˜æ–¹ç½‘ç«™ï¼šhttps://www.activiti.org</p>
<h3 id="42-å»ºæ¨¡è¯­è¨€bpmn">4.2ã€å»ºæ¨¡è¯­è¨€BPMN</h3>
<p>BPMï¼ˆBusiness Process Managementï¼‰å³ä¸šåŠ¡æµç¨‹ç®¡ç†ï¼Œæ˜¯ä¸€ç§è§„èŒƒåŒ–çš„æ„é€ ç«¯åˆ°ç«¯çš„ä¸šåŠ¡æµç¨‹ï¼Œä»¥æŒç»­æé«˜ç»„ç»‡ä¸šåŠ¡æ•ˆç‡</p>
<p>BPM è½¯ä»¶å°±æ˜¯æ ¹æ®ä¼ä¸šä¸­ä¸šåŠ¡ç¯å¢ƒçš„å˜åŒ–ï¼Œæ¨è¿›äººä¸äººä¹‹é—´ã€äººä¸ç³»ç»Ÿä¹‹é—´ä»¥åŠç³»ç»Ÿä¸ç³»ç»Ÿä¹‹é—´çš„æ•´ç†åŠè°ƒæ•´çš„ç»è¥æ–¹æ³•ä¸è§£å†³æ–¹æ¡ˆçš„ IT å·¥å…·ã€‚ä½¿ç”¨ BPM è½¯ä»¶å¯¹ä¼ä¸šå†…éƒ¨åŠå¤–éƒ¨çš„ä¸šåŠ¡æµç¨‹çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸè¿›è¡Œå»ºæ¨¡ã€è‡ªåŠ¨åŒ–ã€ç®¡ç†ç›‘æ§å’Œä¼˜åŒ–ï¼Œå¯ä»¥é™ä½ä¼ä¸šæˆæœ¬ï¼Œæé«˜åˆ©æ¶¦</p>
<p>BPMNï¼ˆBusiness Process Model AndNotationï¼‰å³ä¸šåŠ¡æµç¨‹æ¨¡å‹å’Œç¬¦å·ï¼Œæ˜¯ä¸€å¥—æ ‡å‡†çš„ä¸šåŠ¡æµç¨‹å»ºæ¨¡ç¬¦å·ï¼Œä½¿ç”¨ BPMN æä¾›çš„ç¬¦å·å¯ä»¥åˆ›å»ºä¸šåŠ¡æµç¨‹ã€‚Activit å°±æ˜¯ä½¿ç”¨ BPMN è¿›è¡Œæµç¨‹å»ºæ¨¡ã€æµç¨‹æ‰§è¡Œç®¡ç†çš„</p>
<p>BPMN2.0 æ˜¯ä¸šåŠ¡æµç¨‹å»ºæ¨¡ç¬¦å· 2.0 çš„ç¼©å†™ï¼Œå®ƒç”± Business Process Management Initiative è¿™ä¸ªéè¥åˆ©åä¼šåˆ›å»ºå¹¶ä¸æ–­å‘å±•ã€‚BPMN2.0 æ˜¯ä½¿ç”¨ä¸€äº›ç¬¦å·æ¥æ˜ç¡®ä¸šåŠ¡æµç¨‹è®¾è®¡æµç¨‹å›¾çš„ä¸€å¥—ç¬¦å·è§„èŒƒï¼Œèƒ½å¢è¿›ä¸šåŠ¡å»ºæ¨¡æ—¶çš„æ²Ÿé€šæ•ˆç‡ã€‚ç›®å‰ BPMN2.0 æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œå®ƒç”¨äºåœ¨ BPM ä¸Šä¸‹æ–‡ä¸­è¿›è¡Œå¸ƒå±€å’Œå¯è§†åŒ–çš„æ²Ÿé€š</p>
<p>BPMN2.0 çš„åŸºæœ¬ç¬¦å·ä¸»è¦åŒ…å«ï¼š</p>
<ul>
<li>
<p><strong>äº‹ä»¶ Event</strong></p>
<p>å¼€å§‹ï¼šè¡¨ç¤ºä¸€ä¸ªæµç¨‹çš„å¼€å§‹</p>
<p>ä¸­é—´ï¼šå‘ç”Ÿçš„å¼€å§‹å’Œç»“æŸäº‹ä»¶ä¹‹é—´ï¼Œå½±å“å¤„ç†çš„æµç¨‹</p>
<p>ç»“æŸï¼šè¡¨ç¤ºè¯¥è¿‡ç¨‹ç»“æŸ</p>
<figure data-type="image" tabindex="1"><img src="https://hualiang.online/post-images/1671776604019.png" alt="67177660401" loading="lazy"></figure>
</li>
<li>
<p><strong>æ´»åŠ¨ Activities</strong></p>
<p>æ´»åŠ¨æ˜¯å·¥ä½œæˆ–ä»»åŠ¡çš„ä¸€ä¸ªé€šç”¨æœ¯è¯­ã€‚ä¸€ä¸ªæ´»åŠ¨å¯ä»¥æ˜¯ä¸€ä¸ªä»»åŠ¡ï¼Œè¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå½“å‰æµç¨‹çš„å­å¤„ç†æµç¨‹ï¼›å…¶æ¬¡ï¼Œä½ è¿˜å¯ä»¥ä¸ºæ´»åŠ¨æŒ‡å®šä¸åŒçš„ç±»å‹ã€‚å¸¸è§æ´»åŠ¨å¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="2"><img src="https://hualiang.online/post-images/1671776624801.png" alt="67177662480" loading="lazy"></figure>
</li>
<li>
<p><strong>ç½‘å…³ GateWay</strong></p>
<p>ç”¨äºè¡¨ç¤ºæµç¨‹çš„åˆ†æ”¯ä¸åˆå¹¶ï¼Œæœ‰å‡ ç§å¸¸ç”¨ç½‘å…³éœ€è¦äº†è§£ï¼š</p>
<figure data-type="image" tabindex="3"><img src="https://hualiang.online/post-images/1671776646378.png" alt="67177664637" loading="lazy"></figure>
<ul>
<li>
<p>æ’ä»–ç½‘å…³ï¼šåªæœ‰ä¸€æ¡è·¯å¾„ä¼šè¢«é€‰æ‹©</p>
</li>
<li>
<p>xxxxxxxxxxÂ <code>&lt;el-button type=&quot;success&quot; icon=&quot;el-icon-plus&quot; size=&quot;mini&quot; @click=&quot;add&quot; :disabled=&quot;$hasBP('bnt.sysRole.add')  === false&quot;&gt;</code> æ·»åŠ  <code>&lt;/el-button&gt;</code> vue</p>
</li>
<li>
<p>åŒ…å®¹ç½‘å…³ï¼šå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šæ¡çº¿è·¯ï¼Œä¹Ÿå¯ä»¥åœ¨ç½‘å…³ä¸Šè®¾ç½®æ¡ä»¶</p>
</li>
<li>
<p>äº‹ä»¶ç½‘å…³ï¼šä¸“é—¨ä¸ºä¸­é—´æ•è·äº‹ä»¶è®¾ç½®çš„ï¼Œå…è®¸è®¾ç½®å¤šä¸ªè¾“å‡ºæµæŒ‡å‘å¤šä¸ªä¸åŒçš„ä¸­é—´æ•è·äº‹ä»¶ã€‚å½“æµç¨‹æ‰§è¡Œåˆ°äº‹ä»¶ç½‘å…³åï¼Œæµç¨‹å¤„äºç­‰å¾…çŠ¶æ€ï¼Œéœ€è¦ç­‰å¾…æŠ›å‡ºäº‹ä»¶æ‰èƒ½å°†ç­‰å¾…çŠ¶æ€è½¬æ¢ä¸ºæ´»åŠ¨çŠ¶æ€</p>
</li>
</ul>
<figure data-type="image" tabindex="4"><img src="https://hualiang.online/post-images/image-20230209103727489.png" alt="image-20230209103727489" loading="lazy"></figure>
</li>
<li>
<p><strong>æµå‘ Flow</strong></p>
<p>æµæ˜¯è¿æ¥ä¸¤ä¸ªæµç¨‹èŠ‚ç‚¹çš„è¿çº¿ï¼Œå¸¸è§çš„æµå‘åŒ…å«ä»¥ä¸‹å‡ ç§ï¼š</p>
<p>é¡ºåºæµï¼šç”¨ä¸€ä¸ªå¸¦å®å¿ƒç®­å¤´çš„å®å¿ƒçº¿è¡¨ç¤ºï¼Œç”¨äºæŒ‡å®šæ´»åŠ¨æ‰§è¡Œçš„é¡ºåº</p>
<p>ä¿¡æ¯æµï¼šç”¨ä¸€æ¡å¸¦ç®­å¤´çš„è™šçº¿è¡¨ç¤ºï¼Œç”¨äºæè¿°ä¸¤ä¸ªç‹¬ç«‹çš„ä¸šåŠ¡å‚ä¸è€…ï¼ˆä¸šåŠ¡å®ä½“/ä¸šåŠ¡è§’è‰²ï¼‰ä¹‹é—´å‘é€å’Œæ¥å—çš„æ¶ˆæ¯æµåŠ¨</p>
<p>å…³è”ï¼šç”¨ä¸€æ ¹å¸¦æœ‰çº¿ç®­å¤´çš„ç‚¹çº¿è¡¨ç¤ºï¼Œç”¨äºå°†ç›¸å…³çš„æ•°æ®ã€æ–‡æœ¬å’Œå…¶ä»–äººå·¥ä¿¡æ¯ä¸æµå¯¹è±¡è”ç³»èµ·æ¥ã€‚ç”¨äºå±•ç¤ºæ´»åŠ¨çš„è¾“å…¥å’Œè¾“å‡º</p>
<figure data-type="image" tabindex="5"><img src="https://hualiang.online/post-images/1671776662921.png" alt="67177666292" loading="lazy"></figure>
</li>
</ul>
<p><strong>æµç¨‹ç¤ºä¾‹ï¼š</strong></p>
<figure data-type="image" tabindex="6"><img src="https://hualiang.online/post-images/image-20230209104411748.png" alt="image-20230209104411748" loading="lazy"></figure>
<h3 id="43-activitiä½¿ç”¨æµç¨‹">4.3ã€Activitiä½¿ç”¨æµç¨‹</h3>
<p><strong>ç¬¬ä¸€æ­¥ï¼š</strong> å¼•å…¥ä¾èµ–å¹¶åˆå§‹åŒ–æ•°æ®åº“</p>
<p>æ—¢ç„¶activitiæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬è‚¯å®šæ˜¯éœ€è¦å¼•å…¥å¯¹åº”çš„jaråŒ…åæ ‡çš„ï¼Œå…·ä½“å‚è€ƒä»£ç ä¸­çš„ã€‚</p>
<p><strong>ç¬¬äºŒæ­¥ï¼š</strong>  é€šè¿‡å·¥å…·ç»˜ç”»æµç¨‹å›¾</p>
<p>ä½¿ç”¨ activiti æµç¨‹å»ºæ¨¡å·¥å…·(activity-designer)å®šä¹‰ä¸šåŠ¡æµç¨‹(.bpmn æ–‡ä»¶)</p>
<p>.bpmn æ–‡ä»¶å°±æ˜¯ä¸šåŠ¡æµç¨‹å®šä¹‰æ–‡ä»¶ï¼Œé€šè¿‡ xml å®šä¹‰ä¸šåŠ¡æµç¨‹ã€‚</p>
<p><strong>ç¬¬ä¸‰æ­¥</strong>ï¼šæµç¨‹å®šä¹‰éƒ¨ç½²;</p>
<p>å‘ activiti éƒ¨ç½²ä¸šåŠ¡æµç¨‹å®šä¹‰ï¼ˆ.bpmn æ–‡ä»¶ï¼‰ï¼Œä½¿ç”¨ activiti æä¾›çš„ api å‘ activiti ä¸­éƒ¨ç½².bpmn æ–‡ä»¶ï¼Œ</p>
<p>é€šä¿—æ¥è®²ï¼Œå°±æ˜¯è®©activitiè®¤è¯†è¦ä½¿ç”¨çš„æµç¨‹</p>
<p><strong>ç¬¬å››æ­¥ï¼š</strong> å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼ˆProcessInstanceï¼‰</p>
<p>å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹è¡¨ç¤ºå¼€å§‹ä¸€æ¬¡ä¸šåŠ¡æµç¨‹çš„è¿è¡Œï¼Œæ¯”å¦‚å‘˜å·¥è¯·å‡æµç¨‹éƒ¨ç½²å®Œæˆï¼Œå¦‚æœå¼ ä¸‰è¦è¯·å‡å°±å¯ä»¥å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œå¦‚æœæå››è¦è¯·å‡ä¹Ÿå¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œä¸¤ä¸ªæµç¨‹çš„æ‰§è¡Œäº’ç›¸ä¸å½±å“ï¼Œå°±å¥½æ¯”å®šä¹‰ä¸€ä¸ªjavaç±»ï¼Œå®ä¾‹åŒ–ä¸¤ä¸ªå¯¹è±¡ä¸€æ ·ï¼Œéƒ¨ç½²çš„æµç¨‹å°±å¥½æ¯”javaç±»ï¼Œå¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹å°±å¥½æ¯”newä¸€ä¸ªjavaå¯¹è±¡</p>
<p><strong>ç¬¬äº”æ­¥ï¼š</strong> ç”¨æˆ·æŸ¥è¯¢å¾…åŠä»»åŠ¡(Task)</p>
<p>å› ä¸ºç°åœ¨ç³»ç»Ÿçš„ä¸šåŠ¡æµç¨‹å·²ç»äº¤ç»™ activiti ç®¡ç†ï¼Œé€šè¿‡ activiti å°±å¯ä»¥æŸ¥è¯¢å½“å‰æµç¨‹æ‰§è¡Œåˆ°å“ªäº†ï¼Œå½“å‰ç”¨æˆ·éœ€è¦åŠç†ä»€ä¹ˆä»»åŠ¡äº†ï¼Œè¿™äº› activitiå¸®æˆ‘ä»¬ç®¡ç†äº†ã€‚å®é™…ä¸Šæˆ‘ä»¬å­¦ä¹ activitiä¹Ÿåªæ˜¯å­¦ä¹ å®ƒçš„APIæ€ä¹ˆä½¿ç”¨ï¼Œå› ä¸ºå¾ˆå¤šåŠŸèƒ½activitiéƒ½å·²ç»å°è£…å¥½äº†ï¼Œæˆ‘ä»¬ä¼šè°ƒç”¨å°±è¡Œäº†</p>
<p><strong>ç¬¬å…­æ­¥ï¼š</strong> ç”¨æˆ·åŠç†ä»»åŠ¡</p>
<p>ç”¨æˆ·æŸ¥è¯¢å¾…åŠä»»åŠ¡åï¼Œå°±å¯ä»¥åŠç†æŸä¸ªä»»åŠ¡ï¼Œå¦‚æœè¿™ä¸ªä»»åŠ¡åŠç†å®Œæˆè¿˜éœ€è¦å…¶å®ƒç”¨æˆ·åŠç†ï¼Œæ¯”å¦‚è¯·å‡å•åˆ›å»ºåç”±éƒ¨é—¨ç»ç†å®¡æ ¸ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿæ˜¯ç”± activiti å¸®æˆ‘ä»¬å®Œæˆäº†ï¼Œä¸éœ€è¦æˆ‘ä»¬åœ¨ä»£ç ä¸­ç¡¬ç¼–ç æŒ‡å®šä¸‹ä¸€ä¸ªä»»åŠ¡åŠç†äººäº†</p>
<p><strong>ç¬¬ä¸ƒæ­¥ï¼š</strong> æµç¨‹ç»“æŸ</p>
<p>å½“ä»»åŠ¡åŠç†å®Œæˆæ²¡æœ‰ä¸‹ä¸€ä¸ªä»»åŠ¡èŠ‚ç‚¹äº†ï¼Œè¿™ä¸ªæµç¨‹å®ä¾‹å°±å®Œæˆäº†ã€‚</p>
<h1 id="äºŒ-activiti7">äºŒã€Activiti7</h1>
<h2 id="1-activitiä½¿ç”¨">1ã€Activitiä½¿ç”¨</h2>
<h3 id="11-æ•°æ®åº“æ”¯æŒ">1.1ã€æ•°æ®åº“æ”¯æŒ</h3>
<p>Activiti è¿è¡Œå¿…é¡»è¦æœ‰æ•°æ®åº“çš„æ”¯æŒï¼Œæ”¯æŒçš„æ•°æ®åº“æœ‰ï¼šmysqlã€oracleã€postgresã€mssqlã€db2ã€h2</p>
<h3 id="12-activitiç¯å¢ƒ">1.2ã€Activitiç¯å¢ƒ</h3>
<p>æˆ‘ä»¬ç›´æ¥åœ¨å½“å‰é¡¹ç›®ï¼šguigu-oa-parentåšActivitiå…¥é—¨è®²è§£</p>
<h4 id="121-å¼•å…¥ä¾èµ–">1.2.1ã€å¼•å…¥ä¾èµ–</h4>
<pre><code class="language-xml">&lt;!--å¼•å…¥activitiçš„springbootå¯åŠ¨å™¨ --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.activiti&lt;/groupId&gt;
    &lt;artifactId&gt;activiti-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;7.1.0.M6&lt;/version&gt;
    &lt;exclusions&gt;
        &lt;exclusion&gt;
            &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
        &lt;/exclusion&gt;
    &lt;/exclusions&gt;
&lt;/dependency&gt;
</code></pre>
<p>è¯´æ˜ï¼šActiviti7ä¸SpringBootæ•´åˆåï¼Œé»˜è®¤é›†æˆäº†SpringSecurityå®‰å…¨æ¡†æ¶ï¼Œå½“å‰æˆ‘ä»¬é¡¹ç›®å·²ç»é›†æˆè¿‡äº†SpringSecurityï¼Œåç»­æ¡ˆä¾‹è®¾ç½®å®¡æ‰¹äººæ—¶éƒ½å¿…é¡»æ˜¯ç³»ç»Ÿç”¨æˆ·ï¼ŒActivitiæ¡†æ¶ä¼šæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å­˜åœ¨ï¼Œå¦åˆ™ä¼šå‡ºç°å¼‚å¸¸ï¼Œåç»­å¤§å®¶å¯ä»¥åœ¨æ¡ˆä¾‹ä¸­æµ‹è¯•ã€‚</p>
<figure data-type="image" tabindex="7"><img src="https://hualiang.online/post-images/1672035195682.png" alt="67203519568" loading="lazy"></figure>
<h4 id="122-æ·»åŠ é…ç½®">1.2.2ã€æ·»åŠ é…ç½®</h4>
<p>æ•°æ®æºé¡¹ç›®å·²ç»æ·»åŠ ï¼Œåªéœ€è¦å¦‚ä¸‹é…ç½®å³å¯</p>
<pre><code class="language-java">spring:    
	activiti:
      #    false:é»˜è®¤ï¼Œæ•°æ®åº“è¡¨ä¸å˜ï¼Œä½†æ˜¯å¦‚æœç‰ˆæœ¬ä¸å¯¹æˆ–è€…ç¼ºå¤±è¡¨ä¼šæŠ›å‡ºå¼‚å¸¸ï¼ˆç”Ÿäº§ä½¿ç”¨ï¼‰
      #    true:è¡¨ä¸å­˜åœ¨ï¼Œè‡ªåŠ¨åˆ›å»ºï¼ˆå¼€å‘ä½¿ç”¨ï¼‰
      #    create_drop: å¯åŠ¨æ—¶åˆ›å»ºï¼Œå…³é—­æ—¶åˆ é™¤è¡¨ï¼ˆæµ‹è¯•ä½¿ç”¨ï¼‰
      #    drop_create: å¯åŠ¨æ—¶åˆ é™¤è¡¨,åœ¨åˆ›å»ºè¡¨ ï¼ˆä¸éœ€è¦æ‰‹åŠ¨å…³é—­å¼•æ“ï¼‰
      database-schema-update: true
      #ç›‘æµ‹å†å²è¡¨æ˜¯å¦å­˜åœ¨ï¼Œactivities7é»˜è®¤ä¸å¼€å¯å†å²è¡¨
      db-history-used: true
      #noneï¼šä¸ä¿å­˜ä»»ä½•å†å²æ•°æ®ï¼Œæµç¨‹ä¸­è¿™æ˜¯æœ€é«˜æ•ˆçš„
      #activityï¼šåªä¿å­˜æµç¨‹å®ä¾‹å’Œæµç¨‹è¡Œä¸º
      #auditï¼šé™¤äº†activityï¼Œè¿˜ä¿å­˜å…¨éƒ¨çš„æµç¨‹ä»»åŠ¡ä»¥åŠå…¶å±æ€§ï¼Œauditä¸ºhistoryé»˜è®¤å€¼
      #fullï¼šé™¤äº†auditã€è¿˜ä¿å­˜å…¶ä»–å…¨éƒ¨æµç¨‹ç›¸å…³çš„ç»†èŠ‚æ•°æ®ï¼ŒåŒ…æ‹¬ä¸€äº›æµç¨‹å‚æ•°
      history-level: full
      #æ ¡éªŒæµç¨‹æ–‡ä»¶ï¼Œé»˜è®¤æ ¡éªŒresourcesä¸‹çš„process æ–‡ä»¶å¤¹çš„æµç¨‹æ–‡ä»¶
      check-process-definitions: true
</code></pre>
<h4 id="123-å¯åŠ¨é¡¹ç›®">1.2.3ã€å¯åŠ¨é¡¹ç›®</h4>
<p>å¯åŠ¨é¡¹ç›®ï¼Œå³å¯ç”Ÿæˆé¡¹ç›®æ•°æ®åº“è¡¨</p>
<figure data-type="image" tabindex="8"><img src="https://hualiang.online/post-images/1671693937620.png" alt="67169393762" loading="lazy"></figure>
<h4 id="124-æ•°æ®åº“è¡¨ä»‹ç»">1.2.4ã€æ•°æ®åº“è¡¨ä»‹ç»</h4>
<p>Activiti çš„è¿è¡Œæ”¯æŒå¿…é¡»è¦æœ‰è¿™ 25 å¼ è¡¨çš„æ”¯æŒï¼Œä¸»è¦æ˜¯åœ¨ä¸šåŠ¡æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè®°å½•å‚ä¸æµç¨‹çš„ç”¨æˆ·ä¸»ä½“ï¼Œç”¨æˆ·ç»„ä¿¡æ¯ï¼Œä»¥åŠæµç¨‹çš„å®šä¹‰ï¼Œæµç¨‹æ‰§è¡Œæ—¶çš„ä¿¡æ¯ï¼Œå’Œæµç¨‹çš„å†å²ä¿¡æ¯ç­‰ç­‰</p>
<p><strong>1ã€ è¡¨çš„å‘½åè§„åˆ™å’Œä½œç”¨</strong></p>
<p>è§‚å¯Ÿåˆ›å»ºçš„è¡¨ï¼Œæˆ‘ä»¬å‘ç° Activiti çš„è¡¨éƒ½ä»¥ act_ å¼€å¤´ï¼Œç´§æ¥ç€æ˜¯è¡¨ç¤ºè¡¨çš„ç”¨é€”çš„ä¸¤ä¸ªå­—æ¯æ ‡è¯†ï¼Œä¹Ÿå’Œ Activiti æ‰€æä¾›çš„æœåŠ¡çš„ API å¯¹åº”ï¼š</p>
<ul>
<li>ACT_REï¼šRE è¡¨ç¤º repositoryï¼Œè¿™ä¸ªå‰ç¼€çš„è¡¨åŒ…å«äº†æµç¨‹å®šä¹‰å’Œæµç¨‹é™æ€èµ„æº ï¼ˆå›¾ç‰‡ã€è§„åˆ™ã€ç­‰ç­‰ï¼‰</li>
<li>ACT_RUï¼šRU è¡¨ç¤º runtimeï¼Œè¿™äº›è¡¨è¿è¡Œæ—¶ï¼Œä¼šåŒ…å«æµç¨‹å®ä¾‹ã€ä»»åŠ¡ã€å˜é‡ã€å¼‚æ­¥ä»»åŠ¡ç­‰æµç¨‹ä¸šåŠ¡è¿›è¡Œä¸­çš„æ•°æ®ã€‚Activiti åªåœ¨æµç¨‹å®ä¾‹æ‰§è¡Œè¿‡ç¨‹ä¸­ä¿å­˜è¿™äº›æ•°æ®ï¼Œåœ¨æµç¨‹ç»“æŸæ—¶å°±ä¼šåˆ é™¤è¿™äº›è®°å½•ã€‚è¿™æ ·è¡¨å°±å¯ä»¥ä¸€ç›´ä¿æŒå¾ˆå°çš„ä½“ç§¯ï¼Œå¹¶ä¸”é€Ÿåº¦å¾ˆå¿«</li>
<li>ACT_HIï¼šHI è¡¨ç¤º historyï¼Œè¿™äº›è¡¨åŒ…å«ä¸€äº›å†å²æ•°æ®ï¼Œæ¯”å¦‚å†å²æµç¨‹å®ä¾‹ã€å˜é‡ã€ä»»åŠ¡ç­‰ç­‰</li>
<li>ACT_GEï¼šGE è¡¨ç¤º generalï¼Œé€šç”¨æ•°æ®</li>
</ul>
<p><strong>2ã€Activiti æ•°æ®è¡¨ä»‹ç»</strong></p>
<table>
<thead>
<tr>
<th><strong>è¡¨åˆ†ç±»</strong></th>
<th><strong>è¡¨å</strong></th>
<th><strong>è§£é‡Š</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>ä¸€èˆ¬æ•°æ®</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>[ACT_GE_BYTEARRAY]</td>
<td>é€šç”¨çš„æµç¨‹å®šä¹‰å’Œæµç¨‹èµ„æº</td>
</tr>
<tr>
<td></td>
<td>[ACT_GE_PROPERTY]</td>
<td>ç³»ç»Ÿç›¸å…³å±æ€§</td>
</tr>
<tr>
<td>æµç¨‹å†å²è®°å½•</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>[ACT_HI_ACTINST]</td>
<td>å†å²çš„æµç¨‹å®ä¾‹</td>
</tr>
<tr>
<td></td>
<td>[ACT_HI_ATTACHMENT]</td>
<td>å†å²çš„æµç¨‹é™„ä»¶</td>
</tr>
<tr>
<td></td>
<td>[ACT_HI_COMMENT]</td>
<td>å†å²çš„è¯´æ˜æ€§ä¿¡æ¯</td>
</tr>
<tr>
<td></td>
<td>[ACT_HI_DETAIL]</td>
<td>å†å²çš„æµç¨‹è¿è¡Œä¸­çš„ç»†èŠ‚ä¿¡æ¯</td>
</tr>
<tr>
<td></td>
<td>[ACT_HI_IDENTITYLINK]</td>
<td>å†å²çš„æµç¨‹è¿è¡Œè¿‡ç¨‹ä¸­ç”¨æˆ·å…³ç³»</td>
</tr>
<tr>
<td></td>
<td>[ACT_HI_PROCINST]</td>
<td>å†å²çš„æµç¨‹å®ä¾‹</td>
</tr>
<tr>
<td></td>
<td>[ACT_HI_TASKINST]</td>
<td>å†å²çš„ä»»åŠ¡å®ä¾‹</td>
</tr>
<tr>
<td></td>
<td>[ACT_HI_VARINST]</td>
<td>å†å²çš„æµç¨‹è¿è¡Œä¸­çš„å˜é‡ä¿¡æ¯</td>
</tr>
<tr>
<td>æµç¨‹å®šä¹‰è¡¨</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>[ACT_RE_DEPLOYMENT]</td>
<td>éƒ¨ç½²å•å…ƒä¿¡æ¯</td>
</tr>
<tr>
<td></td>
<td>[ACT_RE_MODEL]</td>
<td>æ¨¡å‹ä¿¡æ¯</td>
</tr>
<tr>
<td></td>
<td>[ACT_RE_PROCDEF]</td>
<td>å·²éƒ¨ç½²çš„æµç¨‹å®šä¹‰</td>
</tr>
<tr>
<td>è¿è¡Œå®ä¾‹è¡¨</td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td>[ACT_RU_EVENT_SUBSCR]</td>
<td>è¿è¡Œæ—¶äº‹ä»¶</td>
</tr>
<tr>
<td></td>
<td>[ACT_RU_EXECUTION]</td>
<td>è¿è¡Œæ—¶æµç¨‹æ‰§è¡Œå®ä¾‹</td>
</tr>
<tr>
<td></td>
<td>[ACT_RU_IDENTITYLINK]</td>
<td>è¿è¡Œæ—¶ç”¨æˆ·å…³ç³»ä¿¡æ¯ï¼Œå­˜å‚¨ä»»åŠ¡èŠ‚ç‚¹ä¸å‚ä¸è€…çš„ç›¸å…³ä¿¡æ¯</td>
</tr>
<tr>
<td></td>
<td>[ACT_RU_JOB]</td>
<td>è¿è¡Œæ—¶ä½œä¸š</td>
</tr>
<tr>
<td></td>
<td>[ACT_RU_TASK]</td>
<td>è¿è¡Œæ—¶ä»»åŠ¡</td>
</tr>
<tr>
<td></td>
<td>[ACT_RU_VARIABLE]</td>
<td>è¿è¡Œæ—¶å˜é‡è¡¨</td>
</tr>
</tbody>
</table>
<h3 id="13-activitiå¸¸ç”¨serviceæœåŠ¡æ¥å£">1.3ã€Activitiå¸¸ç”¨ServiceæœåŠ¡æ¥å£</h3>
<p>ç®€å•ä»‹ç»ä¸€ä¸‹å„ä¸ª Service çš„å®ç°ç±»ï¼š</p>
<ul>
<li>
<p>RepositoryService</p>
<p>Activiti çš„èµ„æºç®¡ç†ç±»ï¼Œè¯¥æœåŠ¡è´Ÿè´£éƒ¨ç½²æµç¨‹å®šä¹‰ï¼Œç®¡ç†æµç¨‹èµ„æºã€‚åœ¨ä½¿ç”¨ Activiti æ—¶ï¼Œä¸€å¼€å§‹éœ€è¦å…ˆå®Œæˆæµç¨‹éƒ¨ç½²ï¼Œå³å°†ä½¿ç”¨å»ºæ¨¡å·¥å…·è®¾è®¡çš„ä¸šåŠ¡æµç¨‹å›¾é€šè¿‡ RepositoryService è¿›è¡Œéƒ¨ç½²</p>
</li>
<li>
<p>RuntimeService</p>
<p>Activiti çš„æµç¨‹è¿è¡Œç®¡ç†ç±»ï¼Œç”¨äºå¼€å§‹ä¸€ä¸ªæ–°çš„æµç¨‹å®ä¾‹ï¼Œè·å–å…³äºæµç¨‹æ‰§è¡Œçš„ç›¸å…³ä¿¡æ¯ã€‚æµç¨‹å®šä¹‰ç”¨äºç¡®å®šä¸€ä¸ªæµç¨‹ä¸­çš„ç»“æ„å’Œå„ä¸ªèŠ‚ç‚¹é—´è¡Œä¸ºï¼Œè€Œæµç¨‹å®ä¾‹åˆ™æ˜¯å¯¹åº”çš„æµç¨‹å®šä¹‰çš„ä¸€ä¸ªæ‰§è¡Œï¼Œå¯ä»¥ç†è§£ä¸º Java ä¸­ç±»å’Œå¯¹è±¡çš„å…³ç³»</p>
</li>
<li>
<p>TaskService</p>
<p>Activiti çš„ä»»åŠ¡ç®¡ç†ç±»ï¼Œç”¨äºå¤„ç†ä¸šåŠ¡è¿è¡Œä¸­çš„å„ç§ä»»åŠ¡ï¼Œä¾‹å¦‚æŸ¥è¯¢åˆ†ç»™ç”¨æˆ·æˆ–ç»„çš„ä»»åŠ¡ã€åˆ›å»ºæ–°çš„ä»»åŠ¡ã€åˆ†é…ä»»åŠ¡ã€ç¡®å®šå’Œå®Œæˆä¸€ä¸ªä»»åŠ¡</p>
</li>
<li>
<p>HistoryService</p>
<p>Activiti çš„å†å²ç®¡ç†ç±»ï¼Œå¯ä»¥æŸ¥è¯¢å†å²ä¿¡æ¯ã€‚æ‰§è¡Œæµç¨‹æ—¶ï¼Œå¼•æ“ä¼šä¿å­˜å¾ˆå¤šæ•°æ®ï¼Œæ¯”å¦‚æµç¨‹å®ä¾‹å¯åŠ¨æ—¶é—´ã€ä»»åŠ¡çš„å‚ä¸è€…ã€å®Œæˆä»»åŠ¡çš„æ—¶é—´ã€æ¯ä¸ªæµç¨‹å®ä¾‹çš„æ‰§è¡Œè·¯å¾„ç­‰ç­‰ã€‚è¿™ä¸ªæœåŠ¡ä¸»è¦é€šè¿‡æŸ¥è¯¢åŠŸèƒ½æ¥è·å¾—è¿™äº›æ•°æ®</p>
</li>
<li>
<p>ManagementService</p>
<p>Activiti çš„å¼•æ“ç®¡ç†ç±»ï¼Œæä¾›äº†å¯¹ Activiti æµç¨‹å¼•æ“çš„ç®¡ç†å’Œç»´æŠ¤åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½ä¸åœ¨å·¥ä½œæµé©±åŠ¨çš„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œä¸»è¦ç”¨äº Activiti ç³»ç»Ÿçš„æ—¥å¸¸ç»´æŠ¤</p>
</li>
</ul>
<h3 id="14-æµç¨‹è®¾è®¡å·¥å…·">1.4ã€æµç¨‹è®¾è®¡å·¥å…·</h3>
<p>IDEAç‰ˆæœ¬å°äºç­‰äº2019ï¼Œå¯ä½¿ç”¨Activitiæ’ä»¶actiBPMï¼Œå¤§äºè¯¥ç‰ˆæœ¬çš„IDEAå¯ä½¿ç”¨Activiti BPMN visualizeræ’ä»¶ç»˜åˆ¶æµç¨‹è®¾è®¡ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬ä¸»è§’æ˜¯ï¼š<strong>Activiti Modeler</strong></p>
<p>Activiti Modeler æ˜¯ Activiti å®˜æ–¹æä¾›çš„ä¸€æ¬¾åœ¨çº¿æµç¨‹è®¾è®¡çš„å‰ç«¯æ’ä»¶ï¼Œå¼€å‘äººå‘˜å¯ä»¥æ–¹ä¾¿åœ¨çº¿è¿›è¡Œæµç¨‹è®¾è®¡ï¼Œä¿å­˜æµç¨‹æ¨¡å‹ï¼Œéƒ¨ç½²è‡³æµç¨‹å®šä¹‰ç­‰ç­‰ï¼Œåç»­æˆ‘ä»¬çš„é¡¹ç›®ä¹Ÿæ˜¯é›†æˆActiviti Modelerç»˜åˆ¶æµç¨‹å®šä¹‰ã€‚</p>
<h4 id="141-ä¸‹è½½activiti-explorer">1.4.1ã€ä¸‹è½½activiti-explorer</h4>
<p>å®˜ç½‘ä¸‹è½½ï¼šhttps://www.activiti.org/get-started</p>
<figure data-type="image" tabindex="9"><img src="https://hualiang.online/post-images/1671797894399.png" alt="67179789439" loading="lazy"></figure>
<h4 id="142-è§£å‹è·å–éƒ¨ç½²åŒ…">1.4.2ã€è§£å‹è·å–éƒ¨ç½²åŒ…</h4>
<p>è§£å‹activiti-5.22.0.zipï¼Œåœ¨activiti-5.22.0\warsç›®å½•ä¸‹è·å–activiti-explorer.war</p>
<h4 id="143-éƒ¨ç½²activiti-explorerwar">1.4.3ã€éƒ¨ç½²activiti-explorer.war</h4>
<p>å°†activiti-explorer.waræ”¾åˆ°tomcatéƒ¨ç½²ç›®å½•ï¼Œå¯åŠ¨tomcat</p>
<h4 id="144-è®¿é—®activiti-explorer">1.4.4ã€è®¿é—®activiti-explorer</h4>
<p>http://localhost:8080/activiti-explorer</p>
<p>é»˜è®¤ç™»å½•è´¦å·ï¼škermit	kermit</p>
<figure data-type="image" tabindex="10"><img src="https://hualiang.online/post-images/1671798181491.png" alt="67179818149" loading="lazy"></figure>
<p>ä¸Šé¢æœ‰å¾ˆå¤šåŠŸèƒ½ï¼Œæˆ‘ä»¬å…³æ³¨æµç¨‹è®¾è®¡å³å¯ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p>ç‚¹å‡»ä¸Šå›¾ï¼šæµç¨‹ --&gt; æ–°å»ºæ¨¡å‹ --&gt; è¾“å…¥æ¨¡å‹åç§°ï¼ˆè¯·å‡ï¼‰--&gt; åˆ›å»º</p>
<figure data-type="image" tabindex="11"><img src="https://hualiang.online/post-images/1671798417009.png" alt="67179841700" loading="lazy"></figure>
<h2 id="2-activitiæµç¨‹æ“ä½œ">2ã€Activitiæµç¨‹æ“ä½œ</h2>
<h3 id="21-æµç¨‹å®šä¹‰">2.1ã€æµç¨‹å®šä¹‰</h3>
<p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªè¯·å‡æµç¨‹</p>
<h4 id="211-æ–°å»ºæ¨¡å‹">2.1.1ã€æ–°å»ºæ¨¡å‹</h4>
<figure data-type="image" tabindex="12"><img src="https://hualiang.online/post-images/1671799395117.png" alt="67179939511" loading="lazy"></figure>
<figure data-type="image" tabindex="13"><img src="https://hualiang.online/post-images/1671799424866.png" alt="67179942486" loading="lazy"></figure>
<figure data-type="image" tabindex="14"><img src="https://hualiang.online/post-images/1671798417009.png" alt="67179841700" loading="lazy"></figure>
<h4 id="212-å¼€å§‹èŠ‚ç‚¹">2.1.2ã€å¼€å§‹èŠ‚ç‚¹</h4>
<figure data-type="image" tabindex="15"><img src="https://hualiang.online/post-images/1671799530247.png" alt="67179953024" loading="lazy"></figure>
<h4 id="213-ä»»åŠ¡èŠ‚ç‚¹">2.1.3ã€ä»»åŠ¡èŠ‚ç‚¹</h4>
<figure data-type="image" tabindex="16"><img src="https://hualiang.online/post-images/1671799688089.png" alt="67179968808" loading="lazy"></figure>
<h4 id="214-ç»“æŸèŠ‚ç‚¹">2.1.4ã€ç»“æŸèŠ‚ç‚¹</h4>
<figure data-type="image" tabindex="17"><img src="https://hualiang.online/post-images/1671799739334.png" alt="67179973933" loading="lazy"></figure>
<h4 id="215-è®¾ç½®èŠ‚ç‚¹å±æ€§">2.1.5ã€è®¾ç½®èŠ‚ç‚¹å±æ€§</h4>
<p>æŒ‡å®šæ ‡ç­¾åç§°ï¼šå¼ ä¸‰å®¡æ‰¹ï¼ŒèŠ‚ç‚¹ä»»åŠ¡è´Ÿè´£äººï¼šzhangsan</p>
<figure data-type="image" tabindex="18"><img src="https://hualiang.online/post-images/1671799910878.png" alt="67179991087" loading="lazy"></figure>
<p>æŒ‡å®šæ ‡ç­¾åç§°ï¼šæå››å®¡æ‰¹ï¼ŒèŠ‚ç‚¹ä»»åŠ¡è´Ÿè´£äººï¼šlisi</p>
<figure data-type="image" tabindex="19"><img src="https://hualiang.online/post-images/1672016531652.png" alt="67201653165" loading="lazy"></figure>
<h4 id="215-è®¾ç½®æµç¨‹å®šä¹‰key">2.1.5ã€è®¾ç½®æµç¨‹å®šä¹‰key</h4>
<figure data-type="image" tabindex="20"><img src="https://hualiang.online/post-images/1672016563704.png" alt="67201656370" loading="lazy"></figure>
<h4 id="216-ä¿å­˜æµç¨‹å®šä¹‰æ¨¡å‹">2.1.6ã€ä¿å­˜æµç¨‹å®šä¹‰æ¨¡å‹</h4>
<figure data-type="image" tabindex="21"><img src="https://hualiang.online/post-images/1671800206531.png" alt="67180020653" loading="lazy"></figure>
<h4 id="217-ä¸‹è½½æµç¨‹å®šä¹‰æ–‡ä»¶">2.1.7ã€ä¸‹è½½æµç¨‹å®šä¹‰æ–‡ä»¶</h4>
<figure data-type="image" tabindex="22"><img src="https://hualiang.online/post-images/1672016612079.png" alt="67201661207" loading="lazy"></figure>
<p>ä¸‹è½½æ–‡ä»¶ä¸ºï¼šqingjia.bpmn20.xml</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;definitions xmlns=&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xsd=&quot;http://www.w3.org/2001/XMLSchema&quot; xmlns:activiti=&quot;http://activiti.org/bpmn&quot; xmlns:bpmndi=&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot; xmlns:omgdc=&quot;http://www.omg.org/spec/DD/20100524/DC&quot; xmlns:omgdi=&quot;http://www.omg.org/spec/DD/20100524/DI&quot; typeLanguage=&quot;http://www.w3.org/2001/XMLSchema&quot; expressionLanguage=&quot;http://www.w3.org/1999/XPath&quot; targetNamespace=&quot;http://www.activiti.org/processdef&quot;&gt;
  &lt;process id=&quot;qingjia&quot; isExecutable=&quot;true&quot;&gt;
    &lt;startEvent id=&quot;sid-14A3E2A6-84E4-49E0-BF92-3DABD741430B&quot;&gt;&lt;/startEvent&gt;
    &lt;userTask id=&quot;sid-38632C81-C407-4F0D-944D-FC30F90637A3&quot; name=&quot;å¼ ä¸‰å®¡æ‰¹&quot; activiti:assignee=&quot;zhangsan&quot;&gt;&lt;/userTask&gt;
    &lt;sequenceFlow id=&quot;sid-081A176E-6756-4C4C-B36C-2649B12CFC5D&quot; sourceRef=&quot;sid-14A3E2A6-84E4-49E0-BF92-3DABD741430B&quot; targetRef=&quot;sid-38632C81-C407-4F0D-944D-FC30F90637A3&quot;&gt;&lt;/sequenceFlow&gt;
    &lt;userTask id=&quot;sid-655780D5-8492-494F-9E30-2CFD6691E98D&quot; name=&quot;æå››å®¡æ‰¹&quot; activiti:assignee=&quot;lisi&quot;&gt;&lt;/userTask&gt;
    &lt;sequenceFlow id=&quot;sid-7DCE821D-4AE0-4F27-9811-80B575E7A758&quot; sourceRef=&quot;sid-38632C81-C407-4F0D-944D-FC30F90637A3&quot; targetRef=&quot;sid-655780D5-8492-494F-9E30-2CFD6691E98D&quot;&gt;&lt;/sequenceFlow&gt;
    &lt;endEvent id=&quot;sid-7EE28419-BC61-49AC-8990-C63C4D2F7C0D&quot;&gt;&lt;/endEvent&gt;
    &lt;sequenceFlow id=&quot;sid-2E583A5C-265A-4C05-B5E1-7F5DB98291F1&quot; sourceRef=&quot;sid-655780D5-8492-494F-9E30-2CFD6691E98D&quot; targetRef=&quot;sid-7EE28419-BC61-49AC-8990-C63C4D2F7C0D&quot;&gt;&lt;/sequenceFlow&gt;
  &lt;/process&gt;
  &lt;bpmndi:BPMNDiagram id=&quot;BPMNDiagram_qingjia&quot;&gt;
    &lt;bpmndi:BPMNPlane bpmnElement=&quot;qingjia&quot; id=&quot;BPMNPlane_qingjia&quot;&gt;
      &lt;bpmndi:BPMNShape bpmnElement=&quot;sid-14A3E2A6-84E4-49E0-BF92-3DABD741430B&quot; id=&quot;BPMNShape_sid-14A3E2A6-84E4-49E0-BF92-3DABD741430B&quot;&gt;
        &lt;omgdc:Bounds height=&quot;30.0&quot; width=&quot;30.0&quot; x=&quot;93.5&quot; y=&quot;75.0&quot;&gt;&lt;/omgdc:Bounds&gt;
      &lt;/bpmndi:BPMNShape&gt;
      &lt;bpmndi:BPMNShape bpmnElement=&quot;sid-38632C81-C407-4F0D-944D-FC30F90637A3&quot; id=&quot;BPMNShape_sid-38632C81-C407-4F0D-944D-FC30F90637A3&quot;&gt;
        &lt;omgdc:Bounds height=&quot;80.0&quot; width=&quot;100.0&quot; x=&quot;168.5&quot; y=&quot;50.0&quot;&gt;&lt;/omgdc:Bounds&gt;
      &lt;/bpmndi:BPMNShape&gt;
      &lt;bpmndi:BPMNShape bpmnElement=&quot;sid-655780D5-8492-494F-9E30-2CFD6691E98D&quot; id=&quot;BPMNShape_sid-655780D5-8492-494F-9E30-2CFD6691E98D&quot;&gt;
        &lt;omgdc:Bounds height=&quot;80.0&quot; width=&quot;100.0&quot; x=&quot;313.5&quot; y=&quot;50.0&quot;&gt;&lt;/omgdc:Bounds&gt;
      &lt;/bpmndi:BPMNShape&gt;
      &lt;bpmndi:BPMNShape bpmnElement=&quot;sid-7EE28419-BC61-49AC-8990-C63C4D2F7C0D&quot; id=&quot;BPMNShape_sid-7EE28419-BC61-49AC-8990-C63C4D2F7C0D&quot;&gt;
        &lt;omgdc:Bounds height=&quot;28.0&quot; width=&quot;28.0&quot; x=&quot;458.5&quot; y=&quot;76.0&quot;&gt;&lt;/omgdc:Bounds&gt;
      &lt;/bpmndi:BPMNShape&gt;
      &lt;bpmndi:BPMNEdge bpmnElement=&quot;sid-7DCE821D-4AE0-4F27-9811-80B575E7A758&quot; id=&quot;BPMNEdge_sid-7DCE821D-4AE0-4F27-9811-80B575E7A758&quot;&gt;
        &lt;omgdi:waypoint x=&quot;268.5&quot; y=&quot;90.0&quot;&gt;&lt;/omgdi:waypoint&gt;
        &lt;omgdi:waypoint x=&quot;313.5&quot; y=&quot;90.0&quot;&gt;&lt;/omgdi:waypoint&gt;
      &lt;/bpmndi:BPMNEdge&gt;
      &lt;bpmndi:BPMNEdge bpmnElement=&quot;sid-081A176E-6756-4C4C-B36C-2649B12CFC5D&quot; id=&quot;BPMNEdge_sid-081A176E-6756-4C4C-B36C-2649B12CFC5D&quot;&gt;
        &lt;omgdi:waypoint x=&quot;123.5&quot; y=&quot;90.0&quot;&gt;&lt;/omgdi:waypoint&gt;
        &lt;omgdi:waypoint x=&quot;168.5&quot; y=&quot;90.0&quot;&gt;&lt;/omgdi:waypoint&gt;
      &lt;/bpmndi:BPMNEdge&gt;
      &lt;bpmndi:BPMNEdge bpmnElement=&quot;sid-2E583A5C-265A-4C05-B5E1-7F5DB98291F1&quot; id=&quot;BPMNEdge_sid-2E583A5C-265A-4C05-B5E1-7F5DB98291F1&quot;&gt;
        &lt;omgdi:waypoint x=&quot;413.5&quot; y=&quot;90.0&quot;&gt;&lt;/omgdi:waypoint&gt;
        &lt;omgdi:waypoint x=&quot;458.5&quot; y=&quot;90.0&quot;&gt;&lt;/omgdi:waypoint&gt;
      &lt;/bpmndi:BPMNEdge&gt;
    &lt;/bpmndi:BPMNPlane&gt;
  &lt;/bpmndi:BPMNDiagram&gt;
&lt;/definitions&gt;
</code></pre>
<h4 id="218-ä¸‹è½½æµç¨‹å®šä¹‰å›¾ç‰‡">2.1.8ã€ä¸‹è½½æµç¨‹å®šä¹‰å›¾ç‰‡</h4>
<p>å•å‡»å³é”®ä¸Šå›¾å›¾ç‰‡ï¼Œå›¾ç‰‡å¦å­˜ä¸ºï¼šqingjia.png</p>
<figure data-type="image" tabindex="23"><img src="https://hualiang.online/post-images/1672016670456.png" alt="67201667045" loading="lazy"></figure>
<h4 id="219-å°†èµ„æºæ–‡ä»¶æ”¾å…¥é¡¹ç›®">2.1.9ã€å°†èµ„æºæ–‡ä»¶æ”¾å…¥é¡¹ç›®</h4>
<p>åœ¨service-oaæ¨¡å—resourcesä¸‹æ–°å»ºprocessèµ„æºæ–‡ä»¶å¤¹</p>
<p>å°†qingjia.bpmn20.xmlä¸qingjia.pngæ”¾å…¥processç›®å½•</p>
<h3 id="22-æµç¨‹å®šä¹‰éƒ¨ç½²">2.2ã€æµç¨‹å®šä¹‰éƒ¨ç½²</h3>
<p>å°†ä¸Šé¢åœ¨è®¾è®¡å™¨ä¸­å®šä¹‰çš„æµç¨‹éƒ¨ç½²åˆ°activitiæ•°æ®åº“ä¸­ï¼Œå°±æ˜¯æµç¨‹å®šä¹‰éƒ¨ç½²ã€‚é€šè¿‡è°ƒç”¨activitiçš„apiå°†æµç¨‹å®šä¹‰çš„bpmnå’Œpngä¸¤ä¸ªæ–‡ä»¶ä¸€ä¸ªä¸€ä¸ªæ·»åŠ éƒ¨ç½²åˆ°activitiä¸­ï¼Œä¹Ÿå¯ä»¥å°†ä¸¤ä¸ªæ–‡ä»¶æ‰“æˆzipåŒ…è¿›è¡Œéƒ¨ç½²ã€‚</p>
<h4 id="221-å•ä¸ªæ–‡ä»¶éƒ¨ç½²æ–¹å¼">2.2.1ã€å•ä¸ªæ–‡ä»¶éƒ¨ç½²æ–¹å¼</h4>
<pre><code class="language-java">package com.atguigu;

import org.activiti.engine.RepositoryService;
import org.activiti.engine.repository.Deployment;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;


@RunWith(SpringRunner.class)
@SpringBootTest
public class ProcessTest {

    @Autowired
    private RepositoryService repositoryService;

    @Test
    public void deployProcess() {
        // æµç¨‹éƒ¨ç½²
        Deployment deploy = repositoryService.createDeployment()
                .addClasspathResource(&quot;process/qingjia.bpmn20.xml&quot;)
                .addClasspathResource(&quot;process/qingjia.png&quot;)
                .name(&quot;è¯·å‡ç”³è¯·æµç¨‹&quot;)
                .deploy();
        System.out.println(deploy.getId());
        System.out.println(deploy.getName());
    }
}
</code></pre>
<h4 id="222-å‹ç¼©åŒ…éƒ¨ç½²æ–¹å¼">2.2.2ã€å‹ç¼©åŒ…éƒ¨ç½²æ–¹å¼</h4>
<pre><code class="language-java">@Test
public void deployProcessByZip() {
    // å®šä¹‰zipè¾“å…¥æµ
    InputStream inputStream = this
            .getClass()
            .getClassLoader()
            .getResourceAsStream(
                    &quot;process/qingjia.zip&quot;);
    ZipInputStream zipInputStream = new ZipInputStream(inputStream);

    // æµç¨‹éƒ¨ç½²
    Deployment deployment = repositoryService.createDeployment()
            .addZipInputStream(zipInputStream)
            .name(&quot;è¯·å‡ç”³è¯·æµç¨‹&quot;)
            .deploy();
    System.out.println(&quot;æµç¨‹éƒ¨ç½²idï¼š&quot; + deployment.getId());
    System.out.println(&quot;æµç¨‹éƒ¨ç½²åç§°ï¼š&quot; + deployment.getName());
}
</code></pre>
<h4 id="223-æ“ä½œæ•°æ®åº“è¡¨">2.2.3ã€æ“ä½œæ•°æ®åº“è¡¨</h4>
<p>æµç¨‹å®šä¹‰éƒ¨ç½²åæ“ä½œactivitiçš„3å¼ è¡¨å¦‚ä¸‹ï¼š</p>
<p>act_re_deployment     æµç¨‹å®šä¹‰éƒ¨ç½²è¡¨ï¼Œæ¯éƒ¨ç½²ä¸€æ¬¡å¢åŠ ä¸€æ¡è®°å½•</p>
<p>act_re_procdef            æµç¨‹å®šä¹‰è¡¨ï¼Œéƒ¨ç½²æ¯ä¸ªæ–°çš„æµç¨‹å®šä¹‰éƒ½ä¼šåœ¨è¿™å¼ è¡¨ä¸­å¢åŠ ä¸€æ¡è®°å½•</p>
<p>act_ge_bytearray        æµç¨‹èµ„æºè¡¨</p>
<h3 id="23-å¯åŠ¨æµç¨‹å®ä¾‹">2.3ã€å¯åŠ¨æµç¨‹å®ä¾‹</h3>
<p>æµç¨‹å®šä¹‰:å°†bpmnæ–‡ä»¶æ”¾åˆ°activitiçš„ä¸‰å¼ è¡¨ä¸­,å¥½æ¯”æ˜¯javaä¸­çš„ä¸€ä¸ªç±»<br>
æµç¨‹å®ä¾‹:å¥½æ¯”æ˜¯javaä¸­çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡(ä¸€ä¸ªæµç¨‹å®šä¹‰å¯ä»¥å¯¹åº”å¤šä¸ªæµç¨‹å®ä¾‹)ï¼Œå¼ ä¸‰å¯ä»¥å¯åŠ¨ä¸€ä¸ªè¯·å‡æµç¨‹å®ä¾‹ï¼Œæå››ä¹Ÿå¯ä»¥å¯åŠ¨ä¸€ä¸ªè¯·å‡æµç¨‹å®ä¾‹ï¼Œä»–ä»¬äº’ä¸å½±å“</p>
<pre><code class="language-java">@Autowired
private RuntimeService runtimeService;

@Test
public void startUpProcess() {
    //åˆ›å»ºæµç¨‹å®ä¾‹,æˆ‘ä»¬éœ€è¦çŸ¥é“æµç¨‹å®šä¹‰çš„key
    ProcessInstance processInstance = runtimeService.startProcessInstanceByKey(&quot;qingjia&quot;);
    //è¾“å‡ºå®ä¾‹çš„ç›¸å…³ä¿¡æ¯
    System.out.println(&quot;æµç¨‹å®šä¹‰idï¼š&quot; + processInstance.getProcessDefinitionId());
    System.out.println(&quot;æµç¨‹å®ä¾‹idï¼š&quot; + processInstance.getId());
    System.out.println(&quot;å½“å‰æ´»åŠ¨Idï¼š&quot; + processInstance.getActivityId());
}
</code></pre>
<p><strong>æ“ä½œæ•°æ®è¡¨</strong></p>
<p>act_hi_actinst     æµç¨‹å®ä¾‹æ‰§è¡Œå†å²</p>
<p>act_hi_identitylink  æµç¨‹çš„å‚ä¸ç”¨æˆ·å†å²ä¿¡æ¯</p>
<p>act_hi_procinst      æµç¨‹å®ä¾‹å†å²ä¿¡æ¯</p>
<p>act_hi_taskinst       æµç¨‹ä»»åŠ¡å†å²ä¿¡æ¯</p>
<p>act_ru_execution   æµç¨‹æ‰§è¡Œä¿¡æ¯</p>
<p>act_ru_identitylink  æµç¨‹çš„å‚ä¸ç”¨æˆ·ä¿¡æ¯</p>
<p>act_ru_task              ä»»åŠ¡ä¿¡æ¯</p>
<h3 id="24-æŸ¥è¯¢ä»»åŠ¡">2.4ã€æŸ¥è¯¢ä»»åŠ¡</h3>
<p>æ¯ä¸ªèŠ‚ç‚¹éƒ½é…ç½®äº†Assigneeï¼Œæµç¨‹å¯åŠ¨åï¼Œä»»åŠ¡çš„è´Ÿè´£äººå°±å¯ä»¥æŸ¥è¯¢è‡ªå·±å½“å‰éœ€è¦å¤„ç†çš„ä»»åŠ¡ï¼ŒæŸ¥è¯¢å‡ºæ¥çš„ä»»åŠ¡éƒ½æ˜¯è¯¥ç”¨æˆ·çš„å¾…åŠä»»åŠ¡ã€‚</p>
<pre><code class="language-java">@Autowired
private TaskService taskService;

/**
 * æŸ¥è¯¢å½“å‰ä¸ªäººå¾…æ‰§è¡Œçš„ä»»åŠ¡
 */
@Test
public void findPendingTaskList() {
    //ä»»åŠ¡è´Ÿè´£äºº
    String assignee = &quot;zhangsan&quot;;
    List&lt;Task&gt; list = taskService.createTaskQuery()
            .taskAssignee(assignee)//åªæŸ¥è¯¢è¯¥ä»»åŠ¡è´Ÿè´£äººçš„ä»»åŠ¡
            .list();
    for (Task task : list) {
        System.out.println(&quot;æµç¨‹å®ä¾‹idï¼š&quot; + task.getProcessInstanceId());
        System.out.println(&quot;ä»»åŠ¡idï¼š&quot; + task.getId());
        System.out.println(&quot;ä»»åŠ¡è´Ÿè´£äººï¼š&quot; + task.getAssignee());
        System.out.println(&quot;ä»»åŠ¡åç§°ï¼š&quot; + task.getName());
    }
}
</code></pre>
<p>è¯´æ˜ï¼š</p>
<p>â€‹	æµç¨‹å®ä¾‹id:ä¸€ä¸ªæµç¨‹åªæœ‰ä¸€ä¸ª,æ ‡è¯†è¿™ä¸ªæµç¨‹</p>
<p>â€‹	ä»»åŠ¡id:æµç¨‹æ¯è¿›è¡Œåˆ°æŸä¸ªèŠ‚ç‚¹,å°±ä¼šç»™è¿™ä¸ªèŠ‚ç‚¹åˆ†é…ä¸€ä¸ªä»»åŠ¡id</p>
<p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š</p>
<p>â€‹	æµç¨‹å®ä¾‹idï¼šd969f534-825e-11ed-95b4-7c57581a7819<br>
â€‹	ä»»åŠ¡idï¼šd96c3f28-825e-11ed-95b4-7c57581a7819<br>
â€‹	ä»»åŠ¡è´Ÿè´£äººï¼šzhangsan<br>
â€‹	ä»»åŠ¡åç§°ï¼šå¼ ä¸‰å®¡æ‰¹</p>
<h3 id="25-å¤„ç†å½“å‰ä»»åŠ¡">2.5ã€å¤„ç†å½“å‰ä»»åŠ¡</h3>
<p>ä»»åŠ¡è´Ÿè´£äººæŸ¥è¯¢å¾…åŠä»»åŠ¡ï¼Œé€‰æ‹©ä»»åŠ¡è¿›è¡Œå¤„ç†ï¼Œå®Œæˆä»»åŠ¡ã€‚</p>
<pre><code class="language-java">/**
 * å®Œæˆä»»åŠ¡
 */
@Test
public void completTask(){
    Task task = taskService.createTaskQuery()
            .taskAssignee(&quot;zhangsan&quot;)  //è¦æŸ¥è¯¢çš„è´Ÿè´£äºº
            .singleResult();//è¿”å›ä¸€æ¡

    //å®Œæˆä»»åŠ¡,å‚æ•°ï¼šä»»åŠ¡id
    taskService.complete(task.getId());
}
</code></pre>
<p>å®Œæˆä»»åŠ¡åï¼Œä»»åŠ¡è‡ªåŠ¨åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹</p>
<h3 id="26-æŸ¥è¯¢å·²å¤„ç†ä»»åŠ¡">2.6ã€æŸ¥è¯¢å·²å¤„ç†ä»»åŠ¡</h3>
<pre><code class="language-java">@Autowired
private HistoryService historyService;

/**
 * æŸ¥è¯¢å·²å¤„ç†å†å²ä»»åŠ¡
 */
@Test
public void findProcessedTaskList() {
    //å¼ ä¸‰å·²å¤„ç†è¿‡çš„å†å²ä»»åŠ¡
    List&lt;HistoricTaskInstance&gt; list = historyService.createHistoricTaskInstanceQuery().taskAssignee(&quot;zhangsan&quot;).finished().list();
    for (HistoricTaskInstance historicTaskInstance : list) {
        System.out.println(&quot;æµç¨‹å®ä¾‹idï¼š&quot; + historicTaskInstance.getProcessInstanceId());
        System.out.println(&quot;ä»»åŠ¡idï¼š&quot; + historicTaskInstance.getId());
        System.out.println(&quot;ä»»åŠ¡è´Ÿè´£äººï¼š&quot; + historicTaskInstance.getAssignee());
        System.out.println(&quot;ä»»åŠ¡åç§°ï¼š&quot; + historicTaskInstance.getName());
    }
}
</code></pre>
<h3 id="27-å…¶ä»–æ¥å£äº†è§£">2.7ã€å…¶ä»–æ¥å£ï¼ˆäº†è§£ï¼‰</h3>
<pre><code class="language-java">/**
 * æŸ¥è¯¢æµç¨‹å®šä¹‰
 */
@Test
public void findProcessDefinitionList(){
    List&lt;ProcessDefinition&gt; definitionList = repositoryService.createProcessDefinitionQuery()
            .orderByProcessDefinitionVersion()
            .desc()
            .list();
    //è¾“å‡ºæµç¨‹å®šä¹‰ä¿¡æ¯
    for (ProcessDefinition processDefinition : definitionList) {
        System.out.println(&quot;æµç¨‹å®šä¹‰ id=&quot;+processDefinition.getId());
        System.out.println(&quot;æµç¨‹å®šä¹‰ name=&quot;+processDefinition.getName());
        System.out.println(&quot;æµç¨‹å®šä¹‰ key=&quot;+processDefinition.getKey());
        System.out.println(&quot;æµç¨‹å®šä¹‰ Version=&quot;+processDefinition.getVersion());
        System.out.println(&quot;æµç¨‹éƒ¨ç½²ID =&quot;+processDefinition.getDeploymentId());
    }
}

/**
 * åˆ é™¤æµç¨‹å®šä¹‰
 */
public void deleteDeployment() {
    //éƒ¨ç½²id
    String deploymentId = &quot;82e3bc6b-81da-11ed-8e03-7c57581a7819&quot;;
    //åˆ é™¤æµç¨‹å®šä¹‰ï¼Œå¦‚æœè¯¥æµç¨‹å®šä¹‰å·²æœ‰æµç¨‹å®ä¾‹å¯åŠ¨åˆ™åˆ é™¤æ—¶å‡ºé”™
    repositoryService.deleteDeployment(deploymentId);
    //è®¾ç½®true çº§è”åˆ é™¤æµç¨‹å®šä¹‰ï¼Œå³ä½¿è¯¥æµç¨‹æœ‰æµç¨‹å®ä¾‹å¯åŠ¨ä¹Ÿå¯ä»¥åˆ é™¤ï¼Œè®¾ç½®ä¸ºfalseéçº§åˆ«åˆ é™¤æ–¹å¼
    //repositoryService.deleteDeployment(deploymentId, true);
}
</code></pre>
<h2 id="3-æµç¨‹å®ä¾‹">3ã€æµç¨‹å®ä¾‹</h2>
<h3 id="31-ä»€ä¹ˆæ˜¯æµç¨‹å®ä¾‹">3.1ã€ä»€ä¹ˆæ˜¯æµç¨‹å®ä¾‹</h3>
<p>æµç¨‹å®šä¹‰ProcessDefinitionå’Œæµç¨‹å®ä¾‹ProcessInstanceæ˜¯Activitié‡è¦çš„æ¦‚å¿µï¼Œç±»ä¼¼äºJavaç±»å’ŒJavaå®ä¾‹çš„å…³ç³»</p>
<p>å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹è¡¨ç¤ºå¼€å§‹ä¸€æ¬¡ä¸šåŠ¡æµç¨‹çš„è¿è¡Œï¼Œæ¯”å¦‚å‘˜å·¥è¯·å‡æµç¨‹éƒ¨ç½²å®Œæˆï¼Œå¦‚æœå¼ ä¸‰è¦è¯·å‡å°±å¯ä»¥å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œå¦‚æœæå››è¦è¯·å‡ä¹Ÿå¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œä¸¤ä¸ªæµç¨‹çš„æ‰§è¡Œäº’ç›¸ä¸å½±å“ï¼Œå°±å¥½æ¯”å®šä¹‰ä¸€ä¸ª java ç±»ï¼Œå®ä¾‹åŒ–ä¸¤ä¸ªå¯¹è±¡ä¸€æ ·ï¼Œéƒ¨ç½²çš„æµç¨‹å°±å¥½æ¯” java ç±»ï¼Œå¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹å°±å¥½æ¯” new ä¸€ä¸ª java å¯¹è±¡</p>
<h3 id="32-è®©å®é™…ä¸šåŠ¡ä¸activitiè¡¨å…³è”businesskey">3.2ã€è®©å®é™…ä¸šåŠ¡ä¸activitiè¡¨å…³è”(BusinessKey)</h3>
<p>æ¯”å¦‚æˆ‘ä»¬å¡«å†™ä¸€ä¸ªè¯·å‡å•ï¼Œä¸€å®šä¼šæœ‰ä¸€ä¸ªè¯·å‡å•çš„å”¯ä¸€æ ‡è¯†ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨è¿™ä¸ªæ ‡è¯†æ¥å…³è”activitiï¼Œè¿™ä¸ªæ ‡è¯†åœ¨activitiä¸­ç§°ä¸ºbusinesskey</p>
<p>BusinessKeyï¼šä¸šåŠ¡æ ‡è¯†ï¼Œé€šå¸¸ä¸ºä¸šåŠ¡çš„ä¸»é”®ï¼Œä¸šåŠ¡æ ‡è¯†å’Œæµç¨‹æ ‡è¯†ä¸€ä¸€å¯¹åº”ï¼Œä¸šåŠ¡æ ‡è¯†æ¥æºäºä¸šåŠ¡ç³»ç»Ÿï¼Œå­˜å‚¨ä¸šåŠ¡æ ‡è¯†å°±æ˜¯æ ¹æ®ä¸šåŠ¡æ ‡è¯†æ¥å…³è”æŸ¥è¯¢ä¸šåŠ¡ç³»ç»Ÿçš„æ•°æ®</p>
<p>ä¸¾ä¾‹ï¼šè¯·å‡æµç¨‹å¯åŠ¨ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œå°±å¯ä»¥å°†è¯·å‡å•çš„idä½œä¸ºä¸šåŠ¡æ ‡è¯†å­˜å‚¨åˆ°activitiä¸­ï¼Œå°†æ¥æŸ¥è¯¢activitiçš„æµç¨‹å®ä¾‹ä¿¡æ¯å°±å¯ä»¥è·å–è¯·å‡å•çš„idä»è€Œå…³è”æŸ¥è¯¢ä¸šåŠ¡ç³»ç»Ÿæ•°æ®åº“å¾—åˆ°è¯·å‡å•ä¿¡æ¯</p>
<pre><code class="language-java">/**
 * å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œæ·»åŠ businessKey
 */
@Test
public void startUpProcessAddBusinessKey(){
    String businessKey = &quot;1&quot;;
    // å¯åŠ¨æµç¨‹å®ä¾‹ï¼ŒæŒ‡å®šä¸šåŠ¡æ ‡è¯†businessKeyï¼Œä¹Ÿå°±æ˜¯è¯·å‡ç”³è¯·å•id
    ProcessInstance processInstance = runtimeService.
            startProcessInstanceByKey(&quot;qingjia&quot;,businessKey);
    // è¾“å‡º
    System.out.println(&quot;ä¸šåŠ¡id:&quot;+processInstance.getBusinessKey());
}
</code></pre>
<h3 id="33-æŒ‚èµ·æ¿€æ´»æµç¨‹å®ä¾‹">3.3ã€æŒ‚èµ·ï¼Œæ¿€æ´»æµç¨‹å®ä¾‹</h3>
<p>æŸäº›æƒ…å†µå¯èƒ½ç”±äºæµç¨‹å˜æ›´éœ€è¦å°†å½“å‰è¿è¡Œçš„æµç¨‹æš‚åœè€Œä¸æ˜¯ç›´æ¥åˆ é™¤ï¼Œæµç¨‹æš‚åœåå°†ä¸ä¼šæ‰§è¡Œï¼›</p>
<h4 id="331-å…¨éƒ¨æµç¨‹å®ä¾‹æŒ‚èµ·">3.3.1ã€å…¨éƒ¨æµç¨‹å®ä¾‹æŒ‚èµ·</h4>
<p>æ“ä½œæµç¨‹å®šä¹‰ä¸ºæŒ‚èµ·çŠ¶æ€ï¼Œè¯¥æµç¨‹å®šä¹‰ä¸‹é¢çš„æ‰€æœ‰æµç¨‹å®ä¾‹å…¨éƒ¨æš‚åœ:<br>
æµç¨‹å®šä¹‰ä¸ºæŒ‚èµ·çŠ¶æ€ï¼Œè¯¥æµç¨‹å®šä¹‰å°†ä¸å…è®¸å¯åŠ¨æ–°çš„æµç¨‹å®ä¾‹ï¼ŒåŒæ—¶è¯¥æµç¨‹å®šä¹‰ä¸‹æ‰€æœ‰çš„æµç¨‹å®ä¾‹å°†å…¨éƒ¨æŒ‚èµ·æš‚åœæ‰§è¡Œ</p>
<pre><code class="language-java">@Test
public void suspendProcessInstance() {
    ProcessDefinition qingjia = repositoryService.createProcessDefinitionQuery().processDefinitionKey(&quot;qingjia&quot;).singleResult();
    // è·å–åˆ°å½“å‰æµç¨‹å®šä¹‰æ˜¯å¦ä¸ºæš‚åœçŠ¶æ€ suspendedæ–¹æ³•ä¸ºtrueæ˜¯æš‚åœçš„ï¼Œsuspendedæ–¹æ³•ä¸ºfalseæ˜¯è¿è¡Œçš„
    boolean suspended = qingjia.isSuspended();
    if (suspended) {
        // æš‚å®š,é‚£å°±å¯ä»¥æ¿€æ´»
        // å‚æ•°1:æµç¨‹å®šä¹‰çš„id  å‚æ•°2:æ˜¯å¦æ¿€æ´»    å‚æ•°3:æ—¶é—´ç‚¹
        repositoryService.activateProcessDefinitionById(qingjia.getId(), true, null);
        System.out.println(&quot;æµç¨‹å®šä¹‰:&quot; + qingjia.getId() + &quot;æ¿€æ´»&quot;);
    } else {
        repositoryService.suspendProcessDefinitionById(qingjia.getId(), true, null);
        System.out.println(&quot;æµç¨‹å®šä¹‰:&quot; + qingjia.getId() + &quot;æŒ‚èµ·&quot;);
    }
}
</code></pre>
<h4 id="332-å•ä¸ªæµç¨‹å®ä¾‹æŒ‚èµ·">3.3.2ã€å•ä¸ªæµç¨‹å®ä¾‹æŒ‚èµ·</h4>
<p>æ“ä½œæµç¨‹å®ä¾‹å¯¹è±¡ï¼Œé’ˆå¯¹å•ä¸ªæµç¨‹æ‰§è¡ŒæŒ‚èµ·æ“ä½œï¼ŒæŸä¸ªæµç¨‹å®ä¾‹æŒ‚èµ·åˆ™æ­¤æµç¨‹ä¸åœ¨ç»§ç»­æ‰§è¡Œï¼Œå®Œæˆè¯¥æµç¨‹å®ä¾‹çš„å½“å‰ä»»åŠ¡å°†æŠ¥å¼‚å¸¸ï¼›</p>
<pre><code class="language-java">@Test
public void SingleSuspendProcessInstance() {
    String processInstanceId = &quot;8bdff984-ab53-11ed-9b17-f8e43b734677&quot;;
    ProcessInstance processInstance = runtimeService.createProcessInstanceQuery().processInstanceId(processInstanceId).singleResult();
    //è·å–åˆ°å½“å‰æµç¨‹å®šä¹‰æ˜¯å¦ä¸ºæš‚åœçŠ¶æ€   suspendedæ–¹æ³•ä¸ºtrueä»£è¡¨ä¸ºæš‚åœ   falseå°±æ˜¯è¿è¡Œçš„
    boolean suspended = processInstance.isSuspended();
    if (suspended) {
        runtimeService.activateProcessInstanceById(processInstanceId);
        System.out.println(&quot;æµç¨‹å®ä¾‹:&quot; + processInstanceId + &quot;æ¿€æ´»&quot;);
    } else {
        runtimeService.suspendProcessInstanceById(processInstanceId);
        System.out.println(&quot;æµç¨‹å®ä¾‹:&quot; + processInstanceId + &quot;æŒ‚èµ·&quot;);
    }
}
</code></pre>
<h2 id="4-ä»»åŠ¡åˆ†é…">4ã€ä»»åŠ¡åˆ†é…</h2>
<p>ä»»åŠ¡åˆ†é…æœ‰ä¸‰ç§æ–¹å¼</p>
<ol>
<li>å›ºå®šåˆ†é…</li>
<li>UELè¡¨è¾¾å¼åˆ†é…</li>
<li>ç›‘å¬å™¨åˆ†é…</li>
</ol>
<h3 id="41-å›ºå®šåˆ†é…">4.1ã€å›ºå®šåˆ†é…</h3>
<p>åœ¨å‰é¢è¿›è¡Œä¸šåŠ¡æµç¨‹å»ºæ¨¡æ—¶æŒ‡å®šå›ºå®šçš„ä»»åŠ¡è´Ÿè´£äººï¼Œå¦‚ï¼šAssigneeï¼šzhangsan/lisi</p>
<h3 id="42-è¡¨è¾¾å¼åˆ†é…">4.2ã€è¡¨è¾¾å¼åˆ†é…</h3>
<p>activitiä½¿ç”¨UELè¡¨è¾¾å¼ï¼ŒUELæ˜¯java EE6è§„èŒƒçš„ä¸€éƒ¨åˆ†,UELå³ç»Ÿä¸€è¡¨è¾¾å¼è¯­è¨€ï¼Œactivitiæ”¯æŒä¸¤ä¸ªUELè¡¨è¾¾å¼ï¼šUEL-valueå’ŒUEL-methodã€‚</p>
<h4 id="421-uel-value">4.2.1ã€UEL-value</h4>
<p>æ–°å»ºï¼šä¸€ä¸ªåŠ ç­æµç¨‹</p>
<p>å¦‚å›¾ï¼š</p>
<figure data-type="image" tabindex="24"><img src="https://hualiang.online/post-images/1671800917826.png" alt="67180091782" loading="lazy"></figure>
<p>assignee1 è¿™ä¸ªå˜é‡æ˜¯ activiti çš„ä¸€ä¸ªæµç¨‹å˜é‡</p>
<p>æˆ‘ä»¬å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œè¿™ä¸ªå¯åŠ¨å®ä¾‹çš„æ–¹æ³•è·Ÿä¹‹å‰çš„æ–¹æ³•åŸºæœ¬ä¸€è‡´,å”¯ä¸€çš„ä¸åŒæ˜¯åœ¨å¯åŠ¨æ—¶,æ·»åŠ äº†ä¸€ä¸ªå‚æ•°</p>
<pre><code class="language-java">@Test
public void deployProcess01() {
    // æµç¨‹éƒ¨ç½²
    Deployment deploy = repositoryService.createDeployment()
        .addClasspathResource(&quot;process/jiaban01.bpmn20.xml&quot;)
        .name(&quot;åŠ ç­ç”³è¯·æµç¨‹&quot;)
        .deploy();
    System.out.println(deploy.getId());
    System.out.println(deploy.getName());
}

/**
 * å¯åŠ¨æµç¨‹å®ä¾‹
 */
@Test
public void startUpProcess01() {
    Map&lt;String, Object&gt; variables = new HashMap&lt;&gt;();
    variables.put(&quot;assignee1&quot;,&quot;zhangsan&quot;);
    variables.put(&quot;assignee2&quot;,&quot;lisi&quot;);
    //åˆ›å»ºæµç¨‹å®ä¾‹,æˆ‘ä»¬éœ€è¦çŸ¥é“æµç¨‹å®šä¹‰çš„key
    ProcessInstance processInstance = runtimeService.startProcessInstanceByKey(&quot;qingjia01&quot;, variables);
    //è¾“å‡ºå®ä¾‹çš„ç›¸å…³ä¿¡æ¯
    System.out.println(&quot;æµç¨‹å®šä¹‰idï¼š&quot; + processInstance.getProcessDefinitionId());
    System.out.println(&quot;æµç¨‹å®ä¾‹idï¼š&quot; + processInstance.getId());
}
</code></pre>
<h4 id="422-uel-method-æ–¹å¼">4.2.2ã€UEL-method æ–¹å¼</h4>
<p>å¦‚å›¾ï¼š</p>
<figure data-type="image" tabindex="25"><img src="https://hualiang.online/post-images/1671801255280.png" alt="67180125528" loading="lazy"></figure>
<p>userBean æ˜¯ spring å®¹å™¨ä¸­çš„ä¸€ä¸ª beanï¼Œè¡¨ç¤ºè°ƒç”¨è¯¥ bean çš„ getUsername(int id)æ–¹æ³•ã€‚</p>
<p>ç»ç†å®¡æ‰¹ï¼š${userBean.getUsername(1)}</p>
<p>äººäº‹å®¡æ‰¹ï¼š${userBean.getUsername(2)}</p>
<pre><code class="language-java">package com.atguigu.process.bean;

import org.springframework.stereotype.Component;

@Component
public class UserBean {

    public String getUsername(int id) {
        if(id == 1) {
            return &quot;zhangsan&quot;;
        }
        if(id == 2) {
            return &quot;lisi&quot;;
        }
        return &quot;admin&quot;;
    }
}
</code></pre>
<p>éƒ¨ç½²ä¸å¯åŠ¨</p>
<pre><code class="language-java">@Test
public void deployProcess02() {
    // æµç¨‹éƒ¨ç½²
    Deployment deploy = repositoryService.createDeployment()
        .addClasspathResource(&quot;process/jiaban02.bpmn20.xml&quot;)
        .name(&quot;åŠ ç­ç”³è¯·æµç¨‹&quot;)
        .deploy();
    System.out.println(deploy.getId());
    System.out.println(deploy.getName());
}

/**
 * å¯åŠ¨æµç¨‹å®ä¾‹
 */
@Test
public void startUpProcess02() {
    //åˆ›å»ºæµç¨‹å®ä¾‹,æˆ‘ä»¬éœ€è¦çŸ¥é“æµç¨‹å®šä¹‰çš„key
    ProcessInstance processInstance = runtimeService.startProcessInstanceByKey(&quot;qingjia02&quot;);
    //è¾“å‡ºå®ä¾‹çš„ç›¸å…³ä¿¡æ¯
    System.out.println(&quot;æµç¨‹å®šä¹‰idï¼š&quot; + processInstance.getProcessDefinitionId());
    System.out.println(&quot;æµç¨‹å®ä¾‹idï¼š&quot; + processInstance.getId());
}
</code></pre>
<p>å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œå°±ä¼šè°ƒç”¨beanæ–¹æ³•ï¼Œå‚æ•°ä¸ºï¼š1ï¼Œç»ç†å®¡æ‰¹åï¼Œæ¥ç€è°ƒç”¨beanæ–¹æ³•ï¼Œå‚æ•°ä¸ºï¼š2</p>
<h3 id="43-ç›‘å¬å™¨åˆ†é…">4.3ã€ç›‘å¬å™¨åˆ†é…</h3>
<p>ä½¿ç”¨ç›‘å¬å™¨çš„æ–¹å¼æ¥æŒ‡å®šè´Ÿè´£äººï¼Œé‚£ä¹ˆåœ¨æµç¨‹è®¾è®¡æ—¶å°±ä¸éœ€è¦æŒ‡å®šassigneeã€‚</p>
<p>ä»»åŠ¡ç›‘å¬å™¨æ˜¯å‘ç”Ÿå¯¹åº”çš„ä»»åŠ¡ç›¸å…³äº‹ä»¶æ—¶æ‰§è¡Œè‡ªå®šä¹‰ java é€»è¾‘ æˆ–è¡¨è¾¾å¼</p>
<p>Eventçš„é€‰é¡¹åŒ…å«ï¼š</p>
<pre><code>Createï¼šä»»åŠ¡åˆ›å»ºåè§¦å‘
Assignmentï¼šä»»åŠ¡åˆ†é…åè§¦å‘
Deleteï¼šä»»åŠ¡å®Œæˆåè§¦å‘
Allï¼šæ‰€æœ‰äº‹ä»¶å‘ç”Ÿéƒ½è§¦å‘
</code></pre>
<p>å®šä¹‰ä»»åŠ¡ç›‘å¬ç±»ï¼Œä¸”ç±»å¿…é¡»å®ç° org.activiti.engine.delegate.TaskListener æ¥å£</p>
<pre><code class="language-java">package com.atguigu.process.bean;

import org.activiti.engine.delegate.DelegateTask;
import org.activiti.engine.delegate.TaskListener;

public class MyTaskListener implements TaskListener {

    @Override
    public void notify(DelegateTask delegateTask) {
        if(delegateTask.getName().equals(&quot;ç»ç†å®¡æ‰¹&quot;)){
            //è¿™é‡ŒæŒ‡å®šä»»åŠ¡è´Ÿè´£äºº
            delegateTask.setAssignee(&quot;zhangsan&quot;);
        } else if(delegateTask.getName().equals(&quot;äººäº‹å®¡æ‰¹&quot;)){
            //è¿™é‡ŒæŒ‡å®šä»»åŠ¡è´Ÿè´£äºº
            delegateTask.setAssignee(&quot;lisi&quot;);
        }
    }
}
</code></pre>
<p>é…ç½®ç›‘å¬å™¨</p>
<figure data-type="image" tabindex="26"><img src="https://hualiang.online/post-images/1671802034480.png" alt="67180203448" loading="lazy"></figure>
<figure data-type="image" tabindex="27"><img src="https://hualiang.online/post-images/1671801889180.png" alt="67180188918" loading="lazy"></figure>
<p>ç»ç†å®¡æ‰¹ä¸äººäº‹å®¡æ‰¹ï¼Œéƒ½è®¾ç½®ä¸€æ ·çš„ç›‘å¬å³å¯</p>
<p>éƒ¨ç½²ä¸æµ‹è¯•</p>
<pre><code class="language-java">@Test
public void deployProcess03() {
    // æµç¨‹éƒ¨ç½²
    Deployment deploy = repositoryService.createDeployment()
            .addClasspathResource(&quot;process/jiaban03.bpmn20.xml&quot;)
            .name(&quot;åŠ ç­ç”³è¯·æµç¨‹&quot;)
            .deploy();
    System.out.println(deploy.getId());
    System.out.println(deploy.getName());
}

/**
 * å¯åŠ¨æµç¨‹å®ä¾‹
 */
@Test
public void startUpProcess03() {
    //åˆ›å»ºæµç¨‹å®ä¾‹,æˆ‘ä»¬éœ€è¦çŸ¥é“æµç¨‹å®šä¹‰çš„key
    ProcessInstance processInstance = runtimeService.startProcessInstanceByKey(&quot;jiaban03&quot;);
    //è¾“å‡ºå®ä¾‹çš„ç›¸å…³ä¿¡æ¯
    System.out.println(&quot;æµç¨‹å®šä¹‰idï¼š&quot; + processInstance.getProcessDefinitionId());
    System.out.println(&quot;æµç¨‹å®ä¾‹idï¼š&quot; + processInstance.getId());
}
</code></pre>
<p>å¯åŠ¨æµç¨‹å®ä¾‹ï¼Œå°±ä¼šè°ƒç”¨MyTaskListenerç›‘å¬æ–¹æ³•</p>
<h2 id="5-æµç¨‹å˜é‡">5ã€æµç¨‹å˜é‡</h2>
<h3 id="51-ä»€ä¹ˆæ˜¯æµç¨‹å˜é‡">5.1ã€ä»€ä¹ˆæ˜¯æµç¨‹å˜é‡</h3>
<p>æµç¨‹å˜é‡åœ¨ activiti ä¸­æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„è§’è‰²ï¼Œæµç¨‹è¿è½¬æœ‰æ—¶éœ€è¦é æµç¨‹å˜é‡ï¼Œä¸šåŠ¡ç³»ç»Ÿå’Œ activiti<br>
ç»“åˆæ—¶å°‘ä¸äº†æµç¨‹å˜é‡ï¼Œæµç¨‹å˜é‡å°±æ˜¯ activiti åœ¨ç®¡ç†å·¥ä½œæµæ—¶æ ¹æ®ç®¡ç†éœ€è¦è€Œè®¾ç½®çš„å˜é‡ã€‚<br>
æ¯”å¦‚ï¼šåœ¨è¯·å‡ç”³è¯·æµç¨‹æµè½¬æ—¶å¦‚æœè¯·å‡å¤©æ•°å¤§äº2 å¤©åˆ™ç”±æ€»ç»ç†å®¡æ ¸ï¼Œå¦åˆ™ç”±éƒ¨é—¨ç»ç†ç›´æ¥å®¡æ ¸ï¼Œ è¯·å‡å¤©<br>
æ•°å°±å¯ä»¥è®¾ç½®ä¸ºæµç¨‹å˜é‡ï¼Œåœ¨æµç¨‹æµè½¬æ—¶ä½¿ç”¨ã€‚</p>
<h3 id="52-æµç¨‹å˜é‡çš„ä½œç”¨åŸŸ">5.2ã€æµç¨‹å˜é‡çš„ä½œç”¨åŸŸ</h3>
<p>æµç¨‹å˜é‡çš„ä½œç”¨å¯ä»¥æ˜¯ä¸€ä¸ªæµç¨‹å®ä¾‹ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªä»»åŠ¡(task)æˆ–æ˜¯ä¸€ä¸ªæ‰§è¡Œå®ä¾‹</p>
<h4 id="521-globaå˜é‡">5.2.1ã€globaå˜é‡</h4>
<p>æµç¨‹å˜é‡çš„é»˜è®¤ä½œç”¨åŸŸæ˜¯æµç¨‹å®ä¾‹ã€‚å½“ä¸€ä¸ªæµç¨‹å˜é‡çš„ä½œç”¨åŸŸä¸ºæµç¨‹å®ä¾‹æ—¶ï¼Œå¯ä»¥ç§°ä¸º global å˜é‡</p>
<p>global å˜é‡ä¸­å˜é‡åä¸å…è®¸é‡å¤ï¼Œè®¾ç½®ç›¸åŒåç§°çš„å˜é‡ï¼Œåè®¾ç½®çš„å€¼ä¼šè¦†ç›–å‰è®¾ç½®çš„å˜é‡å€¼ã€‚</p>
<h4 id="522-localå˜é‡">5.2.2ã€localå˜é‡</h4>
<p>ä»»åŠ¡å’Œæ‰§è¡Œå®ä¾‹ä»…ä»…æ˜¯é’ˆå¯¹ä¸€ä¸ªä»»åŠ¡å’Œä¸€ä¸ªæ‰§è¡Œå®ä¾‹èŒƒå›´ï¼ŒèŒƒå›´æ²¡æœ‰æµç¨‹å®ä¾‹å¤§ï¼Œ ç§°ä¸º local å˜é‡ã€‚</p>
<p>Local å˜é‡ç”±äºåœ¨ä¸åŒçš„ä»»åŠ¡æˆ–ä¸åŒçš„æ‰§è¡Œå®ä¾‹ä¸­ï¼Œä½œç”¨åŸŸäº’ä¸å½±å“ï¼Œå˜é‡åå¯ä»¥ç›¸åŒæ²¡æœ‰å½±å“ã€‚Local å˜é‡åä¹Ÿå¯ä»¥å’Œ global å˜é‡åç›¸åŒï¼Œæ²¡æœ‰å½±å“ã€‚</p>
<h3 id="53-æµç¨‹å˜é‡çš„ä½¿ç”¨æ–¹æ³•">5.3ã€æµç¨‹å˜é‡çš„ä½¿ç”¨æ–¹æ³•</h3>
<p>é€šè¿‡UELè¡¨è¾¾å¼ä½¿ç”¨æµç¨‹å˜é‡</p>
<p>1ã€ä¹‹å‰æˆ‘ä»¬ä¹Ÿä½¿ç”¨è¿‡UELè¡¨è¾¾å¼æ¥è®¾ç½®ä»»åŠ¡å¤„ç†äººï¼Œä¾‹å¦‚ <code>${assignee1}</code>ï¼Œactivitiè·å–UELè¡¨è¾¾å¼çš„å€¼ï¼Œå³æµç¨‹å˜é‡assignee1çš„å€¼ï¼Œå°†å€¼ä½œä¸ºä»»åŠ¡çš„è´Ÿè´£äººè¿›è¡Œä»»åŠ¡åˆ†é…<br>
2ã€æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ä»»åŠ¡å’Œä»»åŠ¡é—´çš„è¿çº¿ä¸Šä½¿ç”¨UELè¡¨è¾¾å¼ï¼Œå†³å®šæµç¨‹èµ°å‘æ¯”å¦‚ <code>${day &gt; 2}</code> å’Œ <code>${day &lt;= 2}</code>ï¼Œdayå°±æ˜¯ä¸€ä¸ªæµç¨‹å˜é‡åç§°ï¼ŒUELè¡¨è¾¾å¼çš„æ‰§è¡Œç»“æœæ˜¯å¸ƒå°”ç±»å‹</p>
<h3 id="54-è®¾ç½®globaå˜é‡">5.4ã€è®¾ç½®globaå˜é‡</h3>
<h4 id="541-å¯åŠ¨æµç¨‹æ—¶è®¾ç½®å˜é‡">5.4.1ã€å¯åŠ¨æµç¨‹æ—¶è®¾ç½®å˜é‡</h4>
<p>åœ¨å¯åŠ¨æµç¨‹æ—¶è®¾ç½®æµç¨‹å˜é‡ï¼Œ<strong>å˜é‡çš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªæµç¨‹å®ä¾‹ã€‚</strong><br>
é€šè¿‡ Map&lt;key,value&gt; è®¾ç½®æµç¨‹å˜é‡ï¼Œmap ä¸­å¯ä»¥è®¾ç½®å¤šä¸ªå˜é‡ï¼Œè¿™ä¸ª key å°±æ˜¯æµç¨‹å˜é‡çš„åå­—</p>
<p>è¿™æ˜¯å‰é¢çš„å®ä¾‹ä»£ç </p>
<pre><code class="language-java">@Test
public void startUpProcess() {
    Map&lt;String, Object&gt; variables = new HashMap&lt;&gt;();
    variables.put(&quot;assignee1&quot;, &quot;zhangsan&quot;);
    variables.put(&quot;assignee2&quot;, &quot;lisi&quot;);
    //åˆ›å»ºæµç¨‹å®ä¾‹,æˆ‘ä»¬éœ€è¦çŸ¥é“æµç¨‹å®šä¹‰çš„key
    ProcessInstance processInstance = runtimeService.startProcessInstanceByKey(&quot;qingjia&quot;, variables);
    //è¾“å‡ºå®ä¾‹çš„ç›¸å…³ä¿¡æ¯
    System.out.println(&quot;æµç¨‹å®šä¹‰idï¼š&quot; + processInstance.getProcessDefinitionId());
    System.out.println(&quot;æµç¨‹å®ä¾‹idï¼š&quot; + processInstance.getId());
}
</code></pre>
<h4 id="542-åœ¨ä»»åŠ¡åŠç†æ—¶è®¾ç½®æµç¨‹å˜é‡">5.4.2ã€åœ¨ä»»åŠ¡åŠç†æ—¶è®¾ç½®æµç¨‹å˜é‡</h4>
<p><strong>å®ƒçš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªæµç¨‹å®ä¾‹</strong> ï¼Œå¦‚æœè®¾ç½®çš„æµç¨‹å˜é‡çš„   key   åœ¨æµç¨‹å®ä¾‹ä¸­å·²å­˜åœ¨ç›¸åŒçš„åå­—åˆ™åè®¾ç½®çš„å˜é‡æ›¿æ¢å‰è¾¹è®¾ç½®çš„å˜é‡ã€‚</p>
<p>æ¨¡æ‹Ÿå®ä¾‹ä»£ç ï¼š</p>
<pre><code class="language-java">@Test
public void completTask() {
    Task task = taskService.createTaskQuery()
            .taskAssignee(&quot;zhangsan&quot;)  //è¦æŸ¥è¯¢çš„è´Ÿè´£äºº
            .singleResult();//è¿”å›ä¸€æ¡

    Map&lt;String, Object&gt; variables = new HashMap&lt;&gt;();
    variables.put(&quot;assignee2&quot;, &quot;zhao&quot;);
    //å®Œæˆä»»åŠ¡,å‚æ•°ï¼šä»»åŠ¡id
    taskService.complete(task.getId(), variables);
}
</code></pre>
<h4 id="543-é€šè¿‡å½“å‰æµç¨‹å®ä¾‹è®¾ç½®">5.4.3ã€é€šè¿‡å½“å‰æµç¨‹å®ä¾‹è®¾ç½®</h4>
<p>é€šè¿‡æµç¨‹å®ä¾‹ id   è®¾ç½®å…¨å±€å˜é‡ï¼Œ <strong>å®ƒçš„ä½œç”¨åŸŸæ˜¯æ•´ä¸ªæµç¨‹å®ä¾‹</strong> ï¼Œè¯¥æµç¨‹å®ä¾‹å¿…é¡»æœªæ‰§è¡Œå®Œæˆã€‚</p>
<p>æ¨¡æ‹Ÿå®ä¾‹ä»£ç ï¼š</p>
<pre><code class="language-java">@Test
public void processInstanceIdSetVariables() {
    Map&lt;String, Object&gt; variables = new HashMap&lt;&gt;();
    variables.put(&quot;assignee2&quot;, &quot;wang&quot;);
    runtimeService.setVariables(&quot;1c347a90-82c6-11ed-96ca-7c57581a7819&quot;, variables);
}
</code></pre>
<h3 id="55-è®¾ç½®localå˜é‡">5.5ã€è®¾ç½®Localå˜é‡</h3>
<p>local æµç¨‹å˜é‡çš„ä½œç”¨åŸŸåªåœ¨å½“å‰ä»»åŠ¡èŠ‚ç‚¹ä¸‹å¯ç”¨</p>
<p>ä»»åŠ¡åŠç†æ—¶è®¾ç½®localæµç¨‹å˜é‡ï¼Œå½“å‰è¿è¡Œçš„æµç¨‹å®ä¾‹åªèƒ½åœ¨è¯¥ä»»åŠ¡ç»“æŸå‰ä½¿ç”¨ï¼Œä»»åŠ¡ç»“æŸè¯¥å˜é‡æ— æ³•åœ¨å½“å‰æµç¨‹å®ä¾‹ä½¿ç”¨</p>
<p>æ¨¡æ‹Ÿå®ä¾‹ä»£ç ï¼š</p>
<pre><code class="language-java">@Test
public void completLocalTask() {
    Task task = taskService.createTaskQuery()
            .taskAssignee(&quot;zhangsan&quot;)  //è¦æŸ¥è¯¢çš„è´Ÿè´£äºº
            .singleResult();//è¿”å›ä¸€æ¡

    // è®¾ç½®localå˜é‡ï¼Œä½œç”¨åŸŸä¸ºè¯¥ä»»åŠ¡
    taskService.setVariableLocal(task.getId(),&quot;assignee2&quot;,&quot;li&quot;);
    // æŸ¥çœ‹localå˜é‡
    System.out.println(taskService.getVariableLocal(task.getId(), &quot;assignee2&quot;));
    //å®Œæˆä»»åŠ¡,å‚æ•°ï¼šä»»åŠ¡id
    taskService.complete(task.getId());
}
</code></pre>
<h2 id="6-ä»»åŠ¡ç»„">6ã€ä»»åŠ¡ç»„</h2>
<h3 id="61-candidate-userså€™é€‰äºº">6.1ã€Candidate-userså€™é€‰äºº</h3>
<p><strong>1ã€éœ€æ±‚</strong><br>
åœ¨æµç¨‹å®šä¹‰ä¸­åœ¨ä»»åŠ¡ç»“ç‚¹çš„assigneeå›ºå®šè®¾ç½®ä»»åŠ¡è´Ÿè´£äººï¼Œåœ¨æµç¨‹å®šä¹‰æ—¶å°†å‚ä¸è€…å›ºå®šè®¾ç½®åœ¨.bpmnæ–‡ä»¶ä¸­ï¼Œå¦‚æœè¦ä¸´æ—¶å˜æ›´ä»»åŠ¡è´Ÿè´£äººåˆ™éœ€è¦ä¿®æ”¹æµç¨‹å®šä¹‰ï¼Œç³»ç»Ÿæ‰©å±•æ€§å¾ˆå·®ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥ç»™ä»»åŠ¡è®¾ç½®å¤šä¸ªå€™é€‰äººï¼Œä»å€™é€‰äººä¸­é€‰æ‹©å‚ä¸è€…æ¥å®Œæˆä»»åŠ¡</p>
<p><strong>2ã€è®¾ç½®ä»»åŠ¡å€™é€‰äºº</strong></p>
<figure data-type="image" tabindex="28"><img src="https://hualiang.online/post-images/1672024290855.png" alt="67202429085" loading="lazy"></figure>
<figure data-type="image" tabindex="29"><img src="https://hualiang.online/post-images/1672024319632.png" alt="67202431963" loading="lazy"></figure>
<h3 id="62-ç»„ä»»åŠ¡åŠç†æµç¨‹">6.2ã€ç»„ä»»åŠ¡åŠç†æµç¨‹</h3>
<p><strong>ç¬¬ä¸€æ­¥:æŸ¥è¯¢ç»„ä»»åŠ¡</strong></p>
<p>æŒ‡å®šå€™é€‰äººï¼ŒæŸ¥è¯¢è¯¥å€™é€‰äººå½“å‰çš„å¾…åŠä»»åŠ¡<br>
å€™é€‰äººä¸èƒ½åŠç†ä»»åŠ¡<br>
<strong>ç¬¬äºŒæ­¥:æ‹¾å–(claim)ä»»åŠ¡</strong></p>
<p>è¯¥ç»„ä»»åŠ¡çš„æ‰€æœ‰å€™é€‰äººéƒ½èƒ½æ‹¾å–<br>
å°†å€™é€‰äººçš„ç»„ä»»åŠ¡ï¼Œå˜æˆä¸ªäººä»»åŠ¡ï¼ŒåŸæ¥çš„å€™é€‰äººå°±å˜æˆäº†è¯¥ä»»åŠ¡çš„è´Ÿè´£äºº<br>
å¦‚æœæ‹¾å–åä¸æƒ³åŠç†è¯¥ä»»åŠ¡<br>
éœ€è¦å°†å·²ç»æ‹¾å–<br>
<strong>ç¬¬ä¸‰æ­¥:æŸ¥è¯¢ä¸ªäººä»»åŠ¡</strong></p>
<p>æŸ¥è¯¢æ–¹å¼åŒä¸ªäººä»»åŠ¡éƒ¨åˆ†ï¼Œæ ¹æ®assigneeæŸ¥è¯¢ç”¨æˆ·è´Ÿè´£çš„ä¸ªäººä»»åŠ¡<br>
<strong>ç¬¬å››æ­¥:åŠç†ä¸ªäººä»»åŠ¡</strong></p>
<h3 id="63-å…³é”®ä»£ç ">6.3ã€å…³é”®ä»£ç </h3>
<h4 id="631-éƒ¨ç½²åŠå¯åŠ¨">6.3.1ã€éƒ¨ç½²åŠå¯åŠ¨</h4>
<pre><code class="language-java">@Test
public void deployProcess04() {
    // æµç¨‹éƒ¨ç½²
    Deployment deploy = repositoryService.createDeployment()
            .addClasspathResource(&quot;process/jiaban04.bpmn20.xml&quot;)
            .name(&quot;è¯·å‡ç”³è¯·æµç¨‹&quot;)
            .deploy();
    System.out.println(deploy.getId());
    System.out.println(deploy.getName());

    ProcessInstance processInstance = runtimeService.startProcessInstanceByKey(&quot;jiaban04&quot;);
    System.out.println(processInstance.getId());
}
</code></pre>
<h4 id="632-æŸ¥è¯¢ç»„ä»»åŠ¡">6.3.2ã€æŸ¥è¯¢ç»„ä»»åŠ¡</h4>
<pre><code class="language-java">@Test
public void findGroupTaskList() {
    //æŸ¥è¯¢ç»„ä»»åŠ¡
    List&lt;Task&gt; list = taskService.createTaskQuery()
            .taskCandidateUser(&quot;zhangsan01&quot;)//æ ¹æ®å€™é€‰äººæŸ¥è¯¢
            .list();
    for (Task task : list) {
        System.out.println(&quot;----------------------------&quot;);
        System.out.println(&quot;æµç¨‹å®ä¾‹idï¼š&quot; + task.getProcessInstanceId());
        System.out.println(&quot;ä»»åŠ¡idï¼š&quot; + task.getId());
        System.out.println(&quot;ä»»åŠ¡è´Ÿè´£äººï¼š&quot; + task.getAssignee());
        System.out.println(&quot;ä»»åŠ¡åç§°ï¼š&quot; + task.getName());
    }
}
</code></pre>
<h4 id="632-æ‹¾å–ç»„ä»»åŠ¡">6.3.2ã€æ‹¾å–ç»„ä»»åŠ¡</h4>
<pre><code class="language-java">@Test
public void claimTask(){
    //æ‹¾å–ä»»åŠ¡,å³ä½¿è¯¥ç”¨æˆ·ä¸æ˜¯å€™é€‰äººä¹Ÿèƒ½æ‹¾å–(å»ºè®®æ‹¾å–æ—¶æ ¡éªŒæ˜¯å¦æœ‰èµ„æ ¼)
    //æ ¡éªŒè¯¥ç”¨æˆ·æœ‰æ²¡æœ‰æ‹¾å–ä»»åŠ¡çš„èµ„æ ¼
    Task task = taskService.createTaskQuery()
            .taskCandidateUser(&quot;zhangsan01&quot;)//æ ¹æ®å€™é€‰äººæŸ¥è¯¢
            .singleResult();
    if(task!=null){
        //æ‹¾å–ä»»åŠ¡
        taskService.claim(taskId, &quot;zhangsan01&quot;);
        System.out.println(&quot;ä»»åŠ¡æ‹¾å–æˆåŠŸ&quot;);
    }
}
</code></pre>
<p>å¼ ä¸‰01æ‹¾å–ä»»åŠ¡äº†ï¼Œå¼ ä¸‰02å°±ä¸èƒ½æ‹¾å–äº†</p>
<h4 id="633-æŸ¥è¯¢ä¸ªäººå¾…åŠä»»åŠ¡">6.3.3ã€  æŸ¥è¯¢ä¸ªäººå¾…åŠä»»åŠ¡</h4>
<p>æŸ¥è¯¢æ–¹å¼åŒä¸ªäººä»»åŠ¡æŸ¥è¯¢</p>
<pre><code class="language-java">@Test
public void findGroupPendingTaskList() {
    //ä»»åŠ¡è´Ÿè´£äºº
    String assignee = &quot;zhangsan01&quot;;
    List&lt;Task&gt; list = taskService.createTaskQuery()
            .taskAssignee(assignee)//åªæŸ¥è¯¢è¯¥ä»»åŠ¡è´Ÿè´£äººçš„ä»»åŠ¡
            .list();
    for (Task task : list) {
        System.out.println(&quot;æµç¨‹å®ä¾‹idï¼š&quot; + task.getProcessInstanceId());
        System.out.println(&quot;ä»»åŠ¡idï¼š&quot; + task.getId());
        System.out.println(&quot;ä»»åŠ¡è´Ÿè´£äººï¼š&quot; + task.getAssignee());
        System.out.println(&quot;ä»»åŠ¡åç§°ï¼š&quot; + task.getName());
    }
}
</code></pre>
<h4 id="634-åŠç†ä¸ªäººä»»åŠ¡">6.3.4ã€  åŠç†ä¸ªäººä»»åŠ¡</h4>
<p>åŒä¸ªäººä»»åŠ¡åŠç†</p>
<pre><code class="language-java">@Test
public void completGroupTask() {
    Task task = taskService.createTaskQuery()
            .taskAssignee(&quot;zhangsan01&quot;)  //è¦æŸ¥è¯¢çš„è´Ÿè´£äºº
            .singleResult();//è¿”å›ä¸€æ¡
    taskService.complete(task.getId());
}
</code></pre>
<h4 id="635-å½’è¿˜ç»„ä»»åŠ¡">6.3.5ã€å½’è¿˜ç»„ä»»åŠ¡</h4>
<p>å¦‚æœä¸ªäººä¸æƒ³åŠç†è¯¥ç»„ä»»åŠ¡ï¼Œå¯ä»¥å½’è¿˜ç»„ä»»åŠ¡ï¼Œå½’è¿˜åè¯¥ç”¨æˆ·ä¸å†æ˜¯è¯¥ä»»åŠ¡çš„è´Ÿè´£äºº</p>
<pre><code class="language-java">@Test
public void assigneeToGroupTask() {
    String taskId = &quot;d96c3f28-825e-11ed-95b4-7c57581a7819&quot;;
    // ä»»åŠ¡è´Ÿè´£äºº
    String userId = &quot;zhangsan01&quot;;
    // æ ¡éªŒuserIdæ˜¯å¦æ˜¯taskIdçš„è´Ÿè´£äººï¼Œå¦‚æœæ˜¯è´Ÿè´£äººæ‰å¯ä»¥å½’è¿˜ç»„ä»»åŠ¡
    Task task = taskService
            .createTaskQuery()
            .taskId(taskId)
            .taskAssignee(userId)
            .singleResult();
    if (task != null) {
        // å¦‚æœè®¾ç½®ä¸ºnullï¼Œå½’è¿˜ç»„ä»»åŠ¡,è¯¥ ä»»åŠ¡æ²¡æœ‰è´Ÿè´£äºº
        taskService.setAssignee(taskId, null);
    }
}
</code></pre>
<h4 id="636-ä»»åŠ¡äº¤æ¥">6.3.6ã€  ä»»åŠ¡äº¤æ¥</h4>
<p>ä»»åŠ¡äº¤æ¥ï¼Œä»»åŠ¡è´Ÿè´£äººå°†ä»»åŠ¡äº¤ç»™å…¶å®ƒå€™é€‰äººåŠç†è¯¥ä»»åŠ¡</p>
<pre><code class="language-java">@Test
public void assigneeToCandidateUser() {
    // å½“å‰å¾…åŠä»»åŠ¡
    String taskId = &quot;d96c3f28-825e-11ed-95b4-7c57581a7819&quot;;
    // æ ¡éªŒzhangsan01æ˜¯å¦æ˜¯taskIdçš„è´Ÿè´£äººï¼Œå¦‚æœæ˜¯è´Ÿè´£äººæ‰å¯ä»¥å½’è¿˜ç»„ä»»åŠ¡
    Task task = taskService
            .createTaskQuery()
            .taskId(taskId)
            .taskAssignee(&quot;zhangsan01&quot;)
            .singleResult();
    if (task != null) {
        // å°†æ­¤ä»»åŠ¡äº¤ç»™å…¶å®ƒå€™é€‰äººzhangsan02åŠç†è¯¥ ä»»åŠ¡
        taskService.setAssignee(taskId, &quot;zhangsan02&quot;);
    }
}
</code></pre>
<h2 id="7-ç½‘å…³">7ã€ç½‘å…³</h2>
<p>ç½‘å…³ç”¨æ¥æ§åˆ¶æµç¨‹çš„æµå‘ï¼Œé€šå¸¸ä¼šå’Œæµç¨‹å˜é‡ä¸€èµ·ä½¿ç”¨ã€‚</p>
<h3 id="71-æ’ä»–ç½‘å…³">7.1ã€æ’ä»–ç½‘å…³</h3>
<ul>
<li>æ’ä»–ç½‘å…³ï¼šåªæœ‰ä¸€æ¡è·¯å¾„ä¼šè¢«é€‰æ‹©</li>
</ul>
<p>å½“ä½ çš„æµç¨‹å‡ºç°è¿™æ ·çš„åœºæ™¯ï¼šè¯·å‡ç”³è¯·ï¼Œä¸¤å¤©ä»¥å†…ï¼Œéƒ¨é—¨ç»ç†å®¡æ‰¹æµç¨‹å°±ç»“æŸäº†ï¼Œä¸¤å¤©ä»¥ä¸Šéœ€è¦æ€»ç»ç†ç›´æ¥å®¡æ‰¹ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æ’ä»–ç½‘å…³</p>
<figure data-type="image" tabindex="30"><img src="https://hualiang.online/post-images/1672021496641.png" alt="67202149664" loading="lazy"></figure>
<h3 id="72-å¹¶è¡Œç½‘å…³">7.2ã€å¹¶è¡Œç½‘å…³</h3>
<ul>
<li>å¹¶ï¼ˆå¹³ï¼‰è¡Œç½‘å…³ï¼šæ‰€æœ‰è·¯å¾„ä¼šè¢«åŒæ—¶é€‰æ‹©</li>
</ul>
<p>å½“å‡ºç°è¿™æ ·çš„åœºæ™¯ï¼šè¯·å‡ç”³è¯·å¼€å§‹ï¼Œéœ€è¦éƒ¨é—¨ç»ç†å’Œæ€»ç»ç†éƒ½å®¡æ‰¹ï¼Œä¸¤è€…æ²¡æœ‰å‰åéœ€è¦ä¸¤ä¸ªäººå…¨éƒ¨å®¡æ‰¹æ‰èƒ½è¿›å…¥ä¸‹ä¸ªèŠ‚ç‚¹äººäº‹å®¡æ‰¹ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦å¹¶è¡Œç½‘å…³</p>
<figure data-type="image" tabindex="31"><img src="https://hualiang.online/post-images/image-20230213201822157.png" alt="image-20230213201822157" loading="lazy"></figure>
<p><strong>ä¸æ’ä»–ç½‘å…³çš„ä¸»è¦åŒºåˆ«æ˜¯ï¼Œå¹¶è¡Œç½‘å…³ä¸ä¼šè§£ææ¡ä»¶ã€‚</strong> <strong>å³ä½¿é¡ºåºæµä¸­å®šä¹‰äº†æ¡ä»¶ï¼Œä¹Ÿä¼šè¢«å¿½ç•¥ã€‚</strong></p>
<h3 id="73-åŒ…å«ç½‘å…³">7.3ã€åŒ…å«ç½‘å…³</h3>
<p>åŒ…å®¹ç½‘å…³ï¼šå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šæ¡çº¿è·¯ï¼Œä¹Ÿå¯ä»¥åœ¨ç½‘å…³ä¸Šè®¾ç½®æ¡ä»¶ï¼Œå¯ä»¥çœ‹åšæ˜¯æ’ä»–ç½‘å…³å’Œå¹¶è¡Œç½‘å…³çš„ç»“åˆä½“ã€‚<br>
å½“å‡ºç°è¿™æ ·çš„åœºæ™¯ï¼šè¯·å‡ç”³è¯·å¤§äºç­‰äº2å¤©éœ€è¦ç”±éƒ¨é—¨æ€»ç»ç†å®¡æ‰¹ï¼Œå°äº2å¤©ç”±éƒ¨é—¨ç»ç†å®¡æ‰¹ï¼Œè¯·å‡ç”³è¯·å¿…é¡»ç»è¿‡äººäº‹ç»ç†å®¡æ‰¹ã€‚è¿™ä¸ªæ—¶å€™å°±éœ€è¦åŒ…å«ç½‘å…³</p>
<figure data-type="image" tabindex="32"><img src="https://hualiang.online/post-images/1672025869146.png" alt="67202586914" loading="lazy"></figure>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#%E4%B8%80-%E4%BA%86%E8%A7%A3%E5%B7%A5%E4%BD%9C%E6%B5%81">ä¸€ã€äº†è§£å·¥ä½œæµ</a>
<ul>
<li><a href="#1-%E4%BB%80%E4%B9%88%E6%98%AF%E5%B7%A5%E4%BD%9C%E6%B5%81">1ã€ä»€ä¹ˆæ˜¯å·¥ä½œæµ</a></li>
<li><a href="#2-%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%BC%95%E6%93%8E">2ã€å·¥ä½œæµå¼•æ“</a></li>
<li><a href="#3-%E5%B8%B8%E8%A7%81%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%BC%95%E6%93%8E">3ã€å¸¸è§å·¥ä½œæµå¼•æ“</a></li>
<li><a href="#4-activiti7%E6%A6%82%E8%BF%B0">4ã€Activiti7æ¦‚è¿°</a>
<ul>
<li><a href="#41-activiti%E4%BB%8B%E7%BB%8D">4.1ã€Activitiä»‹ç»</a></li>
<li><a href="#42-%E5%BB%BA%E6%A8%A1%E8%AF%AD%E8%A8%80bpmn">4.2ã€å»ºæ¨¡è¯­è¨€BPMN</a></li>
<li><a href="#43-activiti%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B">4.3ã€Activitiä½¿ç”¨æµç¨‹</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E4%BA%8C-activiti7">äºŒã€Activiti7</a>
<ul>
<li><a href="#1-activiti%E4%BD%BF%E7%94%A8">1ã€Activitiä½¿ç”¨</a>
<ul>
<li><a href="#11-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%94%AF%E6%8C%81">1.1ã€æ•°æ®åº“æ”¯æŒ</a></li>
<li><a href="#12-activiti%E7%8E%AF%E5%A2%83">1.2ã€Activitiç¯å¢ƒ</a>
<ul>
<li><a href="#121-%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96">1.2.1ã€å¼•å…¥ä¾èµ–</a></li>
<li><a href="#122-%E6%B7%BB%E5%8A%A0%E9%85%8D%E7%BD%AE">1.2.2ã€æ·»åŠ é…ç½®</a></li>
<li><a href="#123-%E5%90%AF%E5%8A%A8%E9%A1%B9%E7%9B%AE">1.2.3ã€å¯åŠ¨é¡¹ç›®</a></li>
<li><a href="#124-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8%E4%BB%8B%E7%BB%8D">1.2.4ã€æ•°æ®åº“è¡¨ä»‹ç»</a></li>
</ul>
</li>
<li><a href="#13-activiti%E5%B8%B8%E7%94%A8service%E6%9C%8D%E5%8A%A1%E6%8E%A5%E5%8F%A3">1.3ã€Activitiå¸¸ç”¨ServiceæœåŠ¡æ¥å£</a></li>
<li><a href="#14-%E6%B5%81%E7%A8%8B%E8%AE%BE%E8%AE%A1%E5%B7%A5%E5%85%B7">1.4ã€æµç¨‹è®¾è®¡å·¥å…·</a>
<ul>
<li><a href="#141-%E4%B8%8B%E8%BD%BDactiviti-explorer">1.4.1ã€ä¸‹è½½activiti-explorer</a></li>
<li><a href="#142-%E8%A7%A3%E5%8E%8B%E8%8E%B7%E5%8F%96%E9%83%A8%E7%BD%B2%E5%8C%85">1.4.2ã€è§£å‹è·å–éƒ¨ç½²åŒ…</a></li>
<li><a href="#143-%E9%83%A8%E7%BD%B2activiti-explorerwar">1.4.3ã€éƒ¨ç½²activiti-explorer.war</a></li>
<li><a href="#144-%E8%AE%BF%E9%97%AEactiviti-explorer">1.4.4ã€è®¿é—®activiti-explorer</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#2-activiti%E6%B5%81%E7%A8%8B%E6%93%8D%E4%BD%9C">2ã€Activitiæµç¨‹æ“ä½œ</a>
<ul>
<li><a href="#21-%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89">2.1ã€æµç¨‹å®šä¹‰</a>
<ul>
<li><a href="#211-%E6%96%B0%E5%BB%BA%E6%A8%A1%E5%9E%8B">2.1.1ã€æ–°å»ºæ¨¡å‹</a></li>
<li><a href="#212-%E5%BC%80%E5%A7%8B%E8%8A%82%E7%82%B9">2.1.2ã€å¼€å§‹èŠ‚ç‚¹</a></li>
<li><a href="#213-%E4%BB%BB%E5%8A%A1%E8%8A%82%E7%82%B9">2.1.3ã€ä»»åŠ¡èŠ‚ç‚¹</a></li>
<li><a href="#214-%E7%BB%93%E6%9D%9F%E8%8A%82%E7%82%B9">2.1.4ã€ç»“æŸèŠ‚ç‚¹</a></li>
<li><a href="#215-%E8%AE%BE%E7%BD%AE%E8%8A%82%E7%82%B9%E5%B1%9E%E6%80%A7">2.1.5ã€è®¾ç½®èŠ‚ç‚¹å±æ€§</a></li>
<li><a href="#215-%E8%AE%BE%E7%BD%AE%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89key">2.1.5ã€è®¾ç½®æµç¨‹å®šä¹‰key</a></li>
<li><a href="#216-%E4%BF%9D%E5%AD%98%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89%E6%A8%A1%E5%9E%8B">2.1.6ã€ä¿å­˜æµç¨‹å®šä¹‰æ¨¡å‹</a></li>
<li><a href="#217-%E4%B8%8B%E8%BD%BD%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89%E6%96%87%E4%BB%B6">2.1.7ã€ä¸‹è½½æµç¨‹å®šä¹‰æ–‡ä»¶</a></li>
<li><a href="#218-%E4%B8%8B%E8%BD%BD%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89%E5%9B%BE%E7%89%87">2.1.8ã€ä¸‹è½½æµç¨‹å®šä¹‰å›¾ç‰‡</a></li>
<li><a href="#219-%E5%B0%86%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E6%94%BE%E5%85%A5%E9%A1%B9%E7%9B%AE">2.1.9ã€å°†èµ„æºæ–‡ä»¶æ”¾å…¥é¡¹ç›®</a></li>
</ul>
</li>
<li><a href="#22-%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89%E9%83%A8%E7%BD%B2">2.2ã€æµç¨‹å®šä¹‰éƒ¨ç½²</a>
<ul>
<li><a href="#221-%E5%8D%95%E4%B8%AA%E6%96%87%E4%BB%B6%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F">2.2.1ã€å•ä¸ªæ–‡ä»¶éƒ¨ç½²æ–¹å¼</a></li>
<li><a href="#222-%E5%8E%8B%E7%BC%A9%E5%8C%85%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F">2.2.2ã€å‹ç¼©åŒ…éƒ¨ç½²æ–¹å¼</a></li>
<li><a href="#223-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E8%A1%A8">2.2.3ã€æ“ä½œæ•°æ®åº“è¡¨</a></li>
</ul>
</li>
<li><a href="#23-%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E5%AE%9E%E4%BE%8B">2.3ã€å¯åŠ¨æµç¨‹å®ä¾‹</a></li>
<li><a href="#24-%E6%9F%A5%E8%AF%A2%E4%BB%BB%E5%8A%A1">2.4ã€æŸ¥è¯¢ä»»åŠ¡</a></li>
<li><a href="#25-%E5%A4%84%E7%90%86%E5%BD%93%E5%89%8D%E4%BB%BB%E5%8A%A1">2.5ã€å¤„ç†å½“å‰ä»»åŠ¡</a></li>
<li><a href="#26-%E6%9F%A5%E8%AF%A2%E5%B7%B2%E5%A4%84%E7%90%86%E4%BB%BB%E5%8A%A1">2.6ã€æŸ¥è¯¢å·²å¤„ç†ä»»åŠ¡</a></li>
<li><a href="#27-%E5%85%B6%E4%BB%96%E6%8E%A5%E5%8F%A3%E4%BA%86%E8%A7%A3">2.7ã€å…¶ä»–æ¥å£ï¼ˆäº†è§£ï¼‰</a></li>
</ul>
</li>
<li><a href="#3-%E6%B5%81%E7%A8%8B%E5%AE%9E%E4%BE%8B">3ã€æµç¨‹å®ä¾‹</a>
<ul>
<li><a href="#31-%E4%BB%80%E4%B9%88%E6%98%AF%E6%B5%81%E7%A8%8B%E5%AE%9E%E4%BE%8B">3.1ã€ä»€ä¹ˆæ˜¯æµç¨‹å®ä¾‹</a></li>
<li><a href="#32-%E8%AE%A9%E5%AE%9E%E9%99%85%E4%B8%9A%E5%8A%A1%E4%B8%8Eactiviti%E8%A1%A8%E5%85%B3%E8%81%94businesskey">3.2ã€è®©å®é™…ä¸šåŠ¡ä¸activitiè¡¨å…³è”(BusinessKey)</a></li>
<li><a href="#33-%E6%8C%82%E8%B5%B7%E6%BF%80%E6%B4%BB%E6%B5%81%E7%A8%8B%E5%AE%9E%E4%BE%8B">3.3ã€æŒ‚èµ·ï¼Œæ¿€æ´»æµç¨‹å®ä¾‹</a>
<ul>
<li><a href="#331-%E5%85%A8%E9%83%A8%E6%B5%81%E7%A8%8B%E5%AE%9E%E4%BE%8B%E6%8C%82%E8%B5%B7">3.3.1ã€å…¨éƒ¨æµç¨‹å®ä¾‹æŒ‚èµ·</a></li>
<li><a href="#332-%E5%8D%95%E4%B8%AA%E6%B5%81%E7%A8%8B%E5%AE%9E%E4%BE%8B%E6%8C%82%E8%B5%B7">3.3.2ã€å•ä¸ªæµç¨‹å®ä¾‹æŒ‚èµ·</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#4-%E4%BB%BB%E5%8A%A1%E5%88%86%E9%85%8D">4ã€ä»»åŠ¡åˆ†é…</a>
<ul>
<li><a href="#41-%E5%9B%BA%E5%AE%9A%E5%88%86%E9%85%8D">4.1ã€å›ºå®šåˆ†é…</a></li>
<li><a href="#42-%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%88%86%E9%85%8D">4.2ã€è¡¨è¾¾å¼åˆ†é…</a>
<ul>
<li><a href="#421-uel-value">4.2.1ã€UEL-value</a></li>
<li><a href="#422-uel-method-%E6%96%B9%E5%BC%8F">4.2.2ã€UEL-method æ–¹å¼</a></li>
</ul>
</li>
<li><a href="#43-%E7%9B%91%E5%90%AC%E5%99%A8%E5%88%86%E9%85%8D">4.3ã€ç›‘å¬å™¨åˆ†é…</a></li>
</ul>
</li>
<li><a href="#5-%E6%B5%81%E7%A8%8B%E5%8F%98%E9%87%8F">5ã€æµç¨‹å˜é‡</a>
<ul>
<li><a href="#51-%E4%BB%80%E4%B9%88%E6%98%AF%E6%B5%81%E7%A8%8B%E5%8F%98%E9%87%8F">5.1ã€ä»€ä¹ˆæ˜¯æµç¨‹å˜é‡</a></li>
<li><a href="#52-%E6%B5%81%E7%A8%8B%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%9C%E7%94%A8%E5%9F%9F">5.2ã€æµç¨‹å˜é‡çš„ä½œç”¨åŸŸ</a>
<ul>
<li><a href="#521-globa%E5%8F%98%E9%87%8F">5.2.1ã€globaå˜é‡</a></li>
<li><a href="#522-local%E5%8F%98%E9%87%8F">5.2.2ã€localå˜é‡</a></li>
</ul>
</li>
<li><a href="#53-%E6%B5%81%E7%A8%8B%E5%8F%98%E9%87%8F%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95">5.3ã€æµç¨‹å˜é‡çš„ä½¿ç”¨æ–¹æ³•</a></li>
<li><a href="#54-%E8%AE%BE%E7%BD%AEgloba%E5%8F%98%E9%87%8F">5.4ã€è®¾ç½®globaå˜é‡</a>
<ul>
<li><a href="#541-%E5%90%AF%E5%8A%A8%E6%B5%81%E7%A8%8B%E6%97%B6%E8%AE%BE%E7%BD%AE%E5%8F%98%E9%87%8F">5.4.1ã€å¯åŠ¨æµç¨‹æ—¶è®¾ç½®å˜é‡</a></li>
<li><a href="#542-%E5%9C%A8%E4%BB%BB%E5%8A%A1%E5%8A%9E%E7%90%86%E6%97%B6%E8%AE%BE%E7%BD%AE%E6%B5%81%E7%A8%8B%E5%8F%98%E9%87%8F">5.4.2ã€åœ¨ä»»åŠ¡åŠç†æ—¶è®¾ç½®æµç¨‹å˜é‡</a></li>
<li><a href="#543-%E9%80%9A%E8%BF%87%E5%BD%93%E5%89%8D%E6%B5%81%E7%A8%8B%E5%AE%9E%E4%BE%8B%E8%AE%BE%E7%BD%AE">5.4.3ã€é€šè¿‡å½“å‰æµç¨‹å®ä¾‹è®¾ç½®</a></li>
</ul>
</li>
<li><a href="#55-%E8%AE%BE%E7%BD%AElocal%E5%8F%98%E9%87%8F">5.5ã€è®¾ç½®Localå˜é‡</a></li>
</ul>
</li>
<li><a href="#6-%E4%BB%BB%E5%8A%A1%E7%BB%84">6ã€ä»»åŠ¡ç»„</a>
<ul>
<li><a href="#61-candidate-users%E5%80%99%E9%80%89%E4%BA%BA">6.1ã€Candidate-userså€™é€‰äºº</a></li>
<li><a href="#62-%E7%BB%84%E4%BB%BB%E5%8A%A1%E5%8A%9E%E7%90%86%E6%B5%81%E7%A8%8B">6.2ã€ç»„ä»»åŠ¡åŠç†æµç¨‹</a></li>
<li><a href="#63-%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81">6.3ã€å…³é”®ä»£ç </a>
<ul>
<li><a href="#631-%E9%83%A8%E7%BD%B2%E5%8F%8A%E5%90%AF%E5%8A%A8">6.3.1ã€éƒ¨ç½²åŠå¯åŠ¨</a></li>
<li><a href="#632-%E6%9F%A5%E8%AF%A2%E7%BB%84%E4%BB%BB%E5%8A%A1">6.3.2ã€æŸ¥è¯¢ç»„ä»»åŠ¡</a></li>
<li><a href="#632-%E6%8B%BE%E5%8F%96%E7%BB%84%E4%BB%BB%E5%8A%A1">6.3.2ã€æ‹¾å–ç»„ä»»åŠ¡</a></li>
<li><a href="#633-%E6%9F%A5%E8%AF%A2%E4%B8%AA%E4%BA%BA%E5%BE%85%E5%8A%9E%E4%BB%BB%E5%8A%A1">6.3.3ã€  æŸ¥è¯¢ä¸ªäººå¾…åŠä»»åŠ¡</a></li>
<li><a href="#634-%E5%8A%9E%E7%90%86%E4%B8%AA%E4%BA%BA%E4%BB%BB%E5%8A%A1">6.3.4ã€  åŠç†ä¸ªäººä»»åŠ¡</a></li>
<li><a href="#635-%E5%BD%92%E8%BF%98%E7%BB%84%E4%BB%BB%E5%8A%A1">6.3.5ã€å½’è¿˜ç»„ä»»åŠ¡</a></li>
<li><a href="#636-%E4%BB%BB%E5%8A%A1%E4%BA%A4%E6%8E%A5">6.3.6ã€  ä»»åŠ¡äº¤æ¥</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#7-%E7%BD%91%E5%85%B3">7ã€ç½‘å…³</a>
<ul>
<li><a href="#71-%E6%8E%92%E4%BB%96%E7%BD%91%E5%85%B3">7.1ã€æ’ä»–ç½‘å…³</a></li>
<li><a href="#72-%E5%B9%B6%E8%A1%8C%E7%BD%91%E5%85%B3">7.2ã€å¹¶è¡Œç½‘å…³</a></li>
<li><a href="#73-%E5%8C%85%E5%90%AB%E7%BD%91%E5%85%B3">7.3ã€åŒ…å«ç½‘å…³</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">ä¸‹ä¸€ç¯‡</div>
            <a href="https://hualiang.online/post/spring-security-permission-authentication/">
              <h3 class="post-title">
                Spring Security æƒé™ç®¡ç†
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by&nbsp;<a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://hualiang.online/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>

<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>è´¡çŒ®æŒ‡å— | Hualiang&#39;s Blog</title>
<link rel="shortcut icon" href="https://hualiang.online/favicon.ico?v=1762159937976">
<link href="https://cdn.staticfile.net/remixicon/2.3.0/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://hualiang.online/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="è´¡çŒ®æŒ‡å— | Hualiang&#39;s Blog - Atom Feed" href="https://hualiang.online/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="æœ¬æ–‡æ¡£æä¾›äº†åˆ›å»ºæ–° Tachiyomi æ‰©å±•çš„è¯´æ˜å’ŒæŠ€å·§ã€‚å¦‚æœæ‚¨æ˜¯é¦–æ¬¡è´¡çŒ®è€…æˆ–å¯¹æ‰€éœ€è¯­è¨€å’ŒæŠ€æœ¯ç¼ºä¹ç»éªŒï¼Œè¯·ä»”ç»†é˜…è¯»ã€‚
æœ¬æŒ‡å—å¹¶éæœ€ç»ˆç‰ˆï¼Œä¼šæŒç»­æ›´æ–°ã€‚å¦‚æœæ‚¨å‘ç°ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿é€šè¿‡ å…ƒé—®é¢˜ï¼ˆMeta Issueï¼‰ æŠ¥å‘Šï¼Œæˆ–ç›´æ¥æäº¤ Pull R..." />
    <meta name="keywords" content="Other" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.5.1/build/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://hualiang.online">
  <img class="avatar" src="https://hualiang.online/images/avatar.png?v=1762159937976" alt="">
  </a>
  <h1 class="site-title">
    Hualiang&#39;s Blog
  </h1>
  <p class="site-description">
    <i>Unless I don't want to win, nobody can make me lose.</i><br/><br/>I always believe å¤©é“é…¬å‹¤
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
  </div>
  <div class="social-container">
    
      
        <a href="https://github.com/hualiong" target="_blank">
          <i class="ri-github-line"></i>
        </a>
      
    
      
        <a href="https://twitter.com/huoliong" target="_blank">
          <i class="ri-twitter-line"></i>
        </a>
      
    
      
        <a href="https://weibo.com" target="_blank">
          <i class="ri-weibo-line"></i>
        </a>
      
    
      
        <a href="https://zhuanlan.zhihu.com" target="_blank">
          <i class="ri-zhihu-line"></i>
        </a>
      
    
      
        <a href="https://www.facebook.com" target="_blank">
          <i class="ri-facebook-line"></i>
        </a>
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              è´¡çŒ®æŒ‡å—
            </h2>
            <div class="post-info">
              <span>
                2025-06-14
              </span>
              <span>
                8 min read
              </span>
              
                <a href="https://hualiang.online/tag/sGT3DdeWp/" class="post-tag">
                  # Other
                </a>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content" v-pre>
                <p>æœ¬æ–‡æ¡£æä¾›äº†åˆ›å»ºæ–° Tachiyomi æ‰©å±•çš„è¯´æ˜å’ŒæŠ€å·§ã€‚å¦‚æœæ‚¨æ˜¯é¦–æ¬¡è´¡çŒ®è€…æˆ–å¯¹æ‰€éœ€è¯­è¨€å’ŒæŠ€æœ¯ç¼ºä¹ç»éªŒï¼Œè¯·<strong>ä»”ç»†é˜…è¯»</strong>ã€‚</p>
<p>æœ¬æŒ‡å—å¹¶éæœ€ç»ˆç‰ˆï¼Œä¼šæŒç»­æ›´æ–°ã€‚å¦‚æœæ‚¨å‘ç°ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿é€šè¿‡ <a href="https://github.com/keiyoushi/extensions-source/issues/new?assignees=&amp;labels=Meta+request&amp;template=06_request_meta.yml">å…ƒé—®é¢˜ï¼ˆMeta Issueï¼‰</a> æŠ¥å‘Šï¼Œæˆ–ç›´æ¥æäº¤ Pull Request ä¿®å¤ã€‚</p>
<h2 id="ç›®å½•">ç›®å½•</h2>
<ol>
<li><a href="#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6">å‰ææ¡ä»¶</a>
<ol>
<li><a href="#%E5%B7%A5%E5%85%B7">å·¥å…·</a></li>
<li><a href="#%E5%85%8B%E9%9A%86%E4%BB%93%E5%BA%93">å…‹éš†ä»“åº“</a></li>
</ol>
</li>
<li><a href="#%E8%8E%B7%E5%8F%96%E5%B8%AE%E5%8A%A9">è·å–å¸®åŠ©</a></li>
<li><a href="#%E7%BC%96%E5%86%99%E6%89%A9%E5%B1%95">ç¼–å†™æ‰©å±•</a>
<ol>
<li><a href="#%E8%AE%BE%E7%BD%AE%E6%96%B0%E7%9A%84-gradle-%E6%A8%A1%E5%9D%97">è®¾ç½®æ–°çš„ Gradle æ¨¡å—</a></li>
<li><a href="#%E6%A0%B8%E5%BF%83%E4%BE%9D%E8%B5%96">æ ¸å¿ƒä¾èµ–</a></li>
<li><a href="#%E6%89%A9%E5%B1%95%E4%B8%BB%E7%B1%BB">æ‰©å±•ä¸»ç±»</a></li>
<li><a href="#%E6%89%A9%E5%B1%95%E8%B0%83%E7%94%A8%E6%B5%81%E7%A8%8B">æ‰©å±•è°ƒç”¨æµç¨‹</a></li>
<li><a href="#%E5%85%B6%E4%BB%96%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">å…¶ä»–æ³¨æ„äº‹é¡¹</a></li>
<li><a href="#%E9%AB%98%E7%BA%A7%E6%89%A9%E5%B1%95%E5%8A%9F%E8%83%BD">é«˜çº§æ‰©å±•åŠŸèƒ½</a></li>
</ol>
</li>
<li><a href="#%E5%A4%9A%E6%BA%90%E4%B8%BB%E9%A2%98">å¤šæºä¸»é¢˜</a>
<ol>
<li><a href="#%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84">ç›®å½•ç»“æ„</a></li>
<li><a href="#%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B">å¼€å‘æµç¨‹</a></li>
<li><a href="#%E8%84%9A%E6%89%8B%E6%9E%B6%E8%A6%86%E7%9B%96">è„šæ‰‹æ¶è¦†ç›–</a></li>
<li><a href="#%E9%99%84%E5%8A%A0%E8%AF%B4%E6%98%8E">é™„åŠ è¯´æ˜</a></li>
</ol>
</li>
<li><a href="#%E8%BF%90%E8%A1%8C">è¿è¡Œ</a></li>
<li><a href="#%E8%B0%83%E8%AF%95">è°ƒè¯•</a>
<ol>
<li><a href="#android-%E8%B0%83%E8%AF%95%E5%99%A8">Android è°ƒè¯•å™¨</a></li>
<li><a href="#%E6%97%A5%E5%BF%97">æ—¥å¿—</a></li>
<li><a href="#%E6%A3%80%E6%9F%A5%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82">æ£€æŸ¥ç½‘ç»œè¯·æ±‚</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8%E5%A4%96%E9%83%A8%E7%BD%91%E7%BB%9C%E6%A3%80%E6%9F%A5%E5%B7%A5%E5%85%B7">ä½¿ç”¨å¤–éƒ¨ç½‘ç»œæ£€æŸ¥å·¥å…·</a></li>
</ol>
</li>
<li><a href="#%E6%9E%84%E5%BB%BA">æ„å»º</a></li>
<li><a href="#%E6%8F%90%E4%BA%A4%E6%9B%B4%E6%94%B9">æäº¤æ›´æ”¹</a>
<ol>
<li><a href="#pull-request-%E6%A3%80%E6%9F%A5%E6%B8%85%E5%8D%95">Pull Request æ£€æŸ¥æ¸…å•</a></li>
</ol>
</li>
</ol>
<hr>
<h2 id="å‰ææ¡ä»¶">å‰ææ¡ä»¶</h2>
<p>å¼€å§‹å‰è¯·æ³¨æ„ï¼Œä»¥ä¸‹æŠ€æœ¯çš„ä½¿ç”¨èƒ½åŠ›æ˜¯<strong>å¿…éœ€çš„</strong>ï¼Œç°æœ‰è´¡çŒ®è€…ä¸ä¼šä¸»åŠ¨æ•™æˆè¿™äº›çŸ¥è¯†ï¼š</p>
<ul>
<li>åŸºç¡€ <a href="https://developer.android.com/">Android å¼€å‘</a></li>
<li><a href="https://kotlinlang.org/">Kotlin</a></li>
<li>ç½‘é¡µæŠ“å–
<ul>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML">HTML</a></li>
<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Selectors">CSS é€‰æ‹©å™¨</a></li>
<li><a href="https://square.github.io/okhttp/">OkHttp</a></li>
<li><a href="https://jsoup.org/">JSoup</a></li>
</ul>
</li>
</ul>
<h3 id="å·¥å…·">å·¥å…·</h3>
<ul>
<li><a href="https://developer.android.com/studio">Android Studio</a></li>
<li>å·²å¯ç”¨å¼€å‘è€…é€‰é¡¹çš„æ¨¡æ‹Ÿå™¨æˆ–æ‰‹æœºï¼Œå¹¶å®‰è£…æœ€æ–°ç‰ˆ Tachiyomi</li>
<li><a href="https://as280093.github.io/AndroidAssetStudio/icons-launcher.html">å›¾æ ‡ç”Ÿæˆå™¨</a></li>
</ul>
<h3 id="å…‹éš†ä»“åº“">å…‹éš†ä»“åº“</h3>
<p>è‹¥ä»“åº“è¿‡å¤§ä¸”åŒ…å«å¤§é‡æºï¼Œå¯æ‰§è¡Œä»¥ä¸‹æ­¥éª¤è·³è¿‡æ— å…³å†…å®¹ï¼ŒåŠ å¿«å…‹éš†ã€å¯¼èˆªå’Œæ„å»ºé€Ÿåº¦ã€‚æ­¤æ–¹æ³•ä¹Ÿå¯å‡å°‘ç£ç›˜å ç”¨å’Œç½‘ç»œæµé‡ã€‚</p>
<p><strong>ä»…å½“ä»“åº“å·¨å¤§ä¸”åŒ…å«å¤§é‡æºæ—¶éœ€æ‰§è¡Œè¿™äº›æ­¥éª¤ã€‚è‹¥ä»“åº“è¾ƒå°ï¼Œè¯·ç›´æ¥å®Œæ•´å…‹éš†ã€‚</strong></p>
<h3 id="æ­¥éª¤">æ­¥éª¤</h3>
<ol>
<li>
<p>æ‰§è¡Œéƒ¨åˆ†å…‹éš†ï¼š</p>
<pre><code class="language-bash">git clone --filter=blob:none --sparse &lt;fork-repo-url&gt;
cd extensions-source/
</code></pre>
</li>
<li>
<p>é…ç½®ç¨€ç–æ£€å‡ºï¼ˆSparse Checkoutï¼‰ï¼š</p>
<p>æœ‰ä¸¤ç§æ¨¡å¼ï¼šé»˜è®¤çš„é”¥å½¢ï¼ˆğŸ”ºï¼‰æ¨¡å¼å’Œéé”¥å½¢æ¨¡å¼ã€‚é”¥å½¢æ¨¡å¼åœ¨å¤§ä»“åº“ä¸­åŒ¹é…æ›´å¿«ï¼Œä½†çµæ´»æ€§è¾ƒä½ã€‚è‹¥éœ€ç®€å•è¿‡æ»¤ï¼Œå¯è·³è¿‡é”¥å½¢æ¨¡å¼ã€‚</p>
<p><strong>é”¥å½¢æ¨¡å¼</strong>ï¼š</p>
<pre><code class="language-bash">git sparse-checkout set --cone --sparse-index
# æ·»åŠ é¡¹ç›®ç›®å½•
git sparse-checkout add buildSrc core gradle lib lib-multisrc utils
# æ·»åŠ å•ä¸ªæº
git sparse-checkout add src/&lt;lang&gt;/&lt;source&gt;
</code></pre>
<p><strong>éé”¥å½¢æ¨¡å¼</strong>ï¼š</p>
<pre><code class="language-bash">git sparse-checkout set --no-cone
# ç¼–è¾‘è¿‡æ»¤è§„åˆ™ï¼ˆç¤ºä¾‹ï¼‰
/*
!/src/*
!/multisrc-lib/*
/src/&lt;lang&gt;/&lt;source&gt;
/lib-multisrc/&lt;source&gt;
</code></pre>
</li>
<li>
<p>é…ç½®è¿œç¨‹ä»“åº“ï¼š</p>
<pre><code class="language-bash">git remote add upstream &lt;keiyoushi-repo-url&gt;
git remote set-url --push upstream no_pushing
git config remote.upstream.fetch &quot;+refs/heads/main:refs/remotes/upstream/main&quot;
git remote update
git branch main -u upstream/main
</code></pre>
</li>
<li>
<p>å¯é€‰å®ç”¨é…ç½®ï¼š</p>
<pre><code class="language-bash">git config remote.origin.prune true
git config pull.ff only
git config alias.sync-main '!git switch main &amp;&amp; git fetch upstream &amp;&amp; git reset --keep FETCH_HEAD'
</code></pre>
</li>
<li>
<p>è‹¥ä¿®æ”¹ç¨€ç–æ£€å‡ºè§„åˆ™ï¼Œè¿è¡Œï¼š</p>
<pre><code class="language-bash">git sparse-checkout reapply
</code></pre>
</li>
</ol>
<p>è¯¦æƒ…å‚é˜… <a href="https://git-scm.com/docs">Git æ–‡æ¡£</a>ã€‚</p>
<hr>
<h2 id="è·å–å¸®åŠ©">è·å–å¸®åŠ©</h2>
<ul>
<li>åŠ å…¥ <a href="https://discord.gg/3FbCpdKbdY">Discord æœåŠ¡å™¨</a> çš„ <code>#programming</code> é¢‘é“æé—®ã€‚</li>
<li>å‚è€ƒç°æœ‰æ‰©å±•ä»£ç ç¤ºä¾‹ï¼Œéƒ¨åˆ†åŠŸèƒ½æœªåœ¨æœ¬æ–‡æ¡£ä¸­æåŠã€‚</li>
</ul>
<hr>
<h2 id="ç¼–å†™æ‰©å±•">ç¼–å†™æ‰©å±•</h2>
<p>å»ºè®®å¤åˆ¶ç°æœ‰æ‰©å±•çš„ç›®å½•ç»“æ„å¹¶æŒ‰éœ€é‡å‘½åã€‚å¼€å§‹å‰è¯·é˜…è¯»ç°æœ‰æ‰©å±•ä»£ç ã€‚</p>
<h3 id="è®¾ç½®æ–°çš„-gradle-æ¨¡å—">è®¾ç½®æ–°çš„ Gradle æ¨¡å—</h3>
<p>æ¯ä¸ªæ‰©å±•åº”ä½äº <code>src/&lt;lang&gt;/&lt;mysourcename&gt;</code>ã€‚è‹¥æºæ”¯æŒå¤šè¯­è¨€ï¼Œä½¿ç”¨ <code>all</code> ä½œä¸º <code>&lt;lang&gt;</code>ã€‚</p>
<p>æ–‡ä»¶å¤¹ä¸­çš„ <code>&lt;lang&gt;</code> åº”ä¸ºä¸»è¦è¯­è¨€ä»£ç ï¼ˆå¦‚ <code>pt-BR</code> å¯¹åº” <code>pt</code>ï¼‰ï¼Œæºç±»ä¸­ä½¿ç”¨å®Œæ•´åŒºåŸŸä»£ç ã€‚</p>
<h3 id="åŠ è½½éƒ¨åˆ†-gradle-æ¨¡å—">åŠ è½½éƒ¨åˆ† Gradle æ¨¡å—</h3>
<p>é»˜è®¤åŠ è½½æ‰€æœ‰æ‰©å±•ï¼Œè‹¥éœ€ä»…åŠ è½½éƒ¨åˆ†ï¼Œè°ƒæ•´ <code>settings.gradle.kts</code> æ–‡ä»¶ã€‚</p>
<h4 id="æ‰©å±•æ–‡ä»¶ç»“æ„">æ‰©å±•æ–‡ä»¶ç»“æ„</h4>
<p>åŸºæœ¬ç»“æ„ç¤ºä¾‹ï¼š</p>
<pre><code class="language-console">src/&lt;lang&gt;/&lt;mysourcename&gt;/
â”œâ”€â”€ AndroidManifest.xml (å¯é€‰)
â”œâ”€â”€ build.gradle
â”œâ”€â”€ res
â”‚   â””â”€â”€ ...ï¼ˆå›¾æ ‡ï¼‰
â””â”€â”€ src
    â””â”€â”€ eu
        â””â”€â”€ kanade
            â””â”€â”€ tachiyomi
                â””â”€â”€ extension
                    â””â”€â”€ &lt;lang&gt;
                        â””â”€â”€ &lt;mysourcename&gt;
                            â””â”€â”€ &lt;MySourceName&gt;.kt
</code></pre>
<p>åŒ…åå¿…é¡»ä¸º <code>eu.kanade.tachiyomi.extension.&lt;lang&gt;.&lt;mysourcename&gt;</code>ã€‚</p>
<h4 id="buildgradle-ç»“æ„">build.gradle ç»“æ„</h4>
<pre><code class="language-groovy">ext {
    extName = '&lt;æºåç§°&gt;'
    extClass = '.&lt;ä¸»ç±»å&gt;'
    extVersionCode = 1
    isNsfw = true
}

apply from: &quot;$rootDir/common.gradle&quot;
</code></pre>
<table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>extName</code></td>
<td>æ‰©å±•åç§°ï¼Œéè‹±æ–‡éœ€ç½—é©¬åŒ–</td>
</tr>
<tr>
<td><code>extClass</code></td>
<td>å®ç° <code>Source</code> çš„ç±»è·¯å¾„ï¼ˆä»¥ç‚¹å¼€å¤´ï¼‰</td>
</tr>
<tr>
<td><code>extVersionCode</code></td>
<td>ç‰ˆæœ¬å·ï¼Œæ¯æ¬¡ä»£ç å˜æ›´éœ€é€’å¢</td>
</tr>
<tr>
<td><code>isNsfw</code></td>
<td>ï¼ˆå¯é€‰ï¼‰æ ‡è®°æ˜¯å¦åŒ…å« NSFW å†…å®¹ï¼Œé»˜è®¤ <code>false</code></td>
</tr>
</tbody>
</table>
<p>ç‰ˆæœ¬åè‡ªåŠ¨ç”Ÿæˆï¼ˆå¦‚ <code>1.4.1</code>ï¼‰ã€‚</p>
<hr>
<h2 id="æ ¸å¿ƒä¾èµ–">æ ¸å¿ƒä¾èµ–</h2>
<h3 id="æ‰©å±•-api">æ‰©å±• API</h3>
<p>ä¾èµ– <a href="https://github.com/tachiyomiorg/extensions-lib">extensions-lib</a>ï¼Œå®é™…å®ç°å‚è€ƒ <a href="https://github.com/tachiyomiorg/tachiyomi">ä¸»åº”ç”¨ä»£ç </a>ã€‚</p>
<h3 id="å…¶ä»–åº“">å…¶ä»–åº“</h3>
<ul>
<li><strong>lib-dataimage</strong>ï¼šå¤„ç† Base64 å›¾ç‰‡æ•°æ®ã€‚</li>
<li><strong>lib-i18n</strong>ï¼šå›½é™…åŒ–æ”¯æŒï¼ŒåŠ è½½ <code>assets/i18n</code> ä¸‹çš„ç¿»è¯‘æ–‡ä»¶ã€‚</li>
</ul>
<p>æ·»åŠ ä¾èµ–ç¤ºä¾‹ï¼š</p>
<pre><code class="language-groovy">dependencies {
    implementation(project(':lib-dataimage'))
    implementation(project(':lib-i18n'))
}
</code></pre>
<hr>
<h2 id="æ‰©å±•ä¸»ç±»">æ‰©å±•ä¸»ç±»</h2>
<p>ä¸»ç±»éœ€å®ç° <code>SourceFactory</code> æˆ–ç»§æ‰¿ <code>HttpSource</code>/<code>ParsedHttpSource</code>ã€‚</p>
<table>
<thead>
<tr>
<th>ç±»</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>SourceFactory</code></td>
<td>æš´éœ²å¤šä¸ªæºï¼ˆå¦‚å¤šè¯­è¨€/é•œåƒï¼‰</td>
</tr>
<tr>
<td><code>HttpSource</code></td>
<td>åŸºäº HTTP çš„åœ¨çº¿æº</td>
</tr>
<tr>
<td><code>ParsedHttpSource</code></td>
<td>æ”¯æŒç½‘é¡µæŠ“å–çš„å·¥å…·ç±»</td>
</tr>
</tbody>
</table>
<h3 id="å…³é”®å­—æ®µ">å…³é”®å­—æ®µ</h3>
<table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>åœ¨â€œæ¥æºâ€åˆ—è¡¨ä¸­æ˜¾ç¤ºçš„åç§°</td>
</tr>
<tr>
<td><code>baseUrl</code></td>
<td>åŸºç¡€ URLï¼ˆä¸å¸¦æœ«å°¾æ–œæ ï¼‰</td>
</tr>
<tr>
<td><code>lang</code></td>
<td>ISO 639-1 è¯­è¨€ä»£ç </td>
</tr>
<tr>
<td><code>id</code></td>
<td>æºæ ‡è¯†ç¬¦ï¼Œé€šå¸¸è‡ªåŠ¨ç”Ÿæˆ</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="æ‰©å±•è°ƒç”¨æµç¨‹">æ‰©å±•è°ƒç”¨æµç¨‹</h2>
<h3 id="çƒ­é—¨æ¼«ç”»popular-manga">çƒ­é—¨æ¼«ç”»ï¼ˆPopular Mangaï¼‰</h3>
<ul>
<li>åº”ç”¨è°ƒç”¨ <code>fetchPopularManga</code> è¿”å›é¦–æ‰¹æ¼«ç”»åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€‚</li>
<li>å¿…é¡»è®¾ç½® <code>url</code>ã€<code>title</code> å’Œ <code>thumbnail_url</code>ã€‚</li>
</ul>
<h3 id="æœ€æ–°æ¼«ç”»latest-manga">æœ€æ–°æ¼«ç”»ï¼ˆLatest Mangaï¼‰</h3>
<ul>
<li>è‹¥ <code>supportsLatest</code> ä¸º <code>true</code>ï¼Œæ˜¾ç¤ºâ€œæœ€æ–°â€æŒ‰é’®ã€‚</li>
<li>æµç¨‹ä¸çƒ­é—¨æ¼«ç”»ç±»ä¼¼ã€‚</li>
</ul>
<h3 id="æ¼«ç”»æœç´¢manga-search">æ¼«ç”»æœç´¢ï¼ˆManga Searchï¼‰</h3>
<ul>
<li><code>fetchSearchManga</code> å¤„ç†æœç´¢è¯·æ±‚ï¼Œæ”¯æŒè¿‡æ»¤å™¨ã€‚</li>
<li>è¿‡æ»¤å™¨ç±»å‹åŒ…æ‹¬é€‰æ‹©æ¡†ã€æ–‡æœ¬è¾“å…¥ã€æ’åºç­‰ã€‚</li>
</ul>
<h3 id="æ¼«ç”»è¯¦æƒ…manga-details">æ¼«ç”»è¯¦æƒ…ï¼ˆManga Detailsï¼‰</h3>
<ul>
<li>ç”¨æˆ·ç‚¹å‡»æ¼«ç”»æ—¶è°ƒç”¨ <code>getMangaDetails</code> å’Œ <code>getChapterList</code>ã€‚</li>
<li><code>SManga</code> é€šè¿‡ <code>url</code> æ ‡è¯†ã€‚</li>
<li>ç« èŠ‚åˆ—è¡¨éœ€æŒ‰æºé¡ºåºé™åºæ’åˆ—ã€‚</li>
</ul>
<hr>
<h2 id="é«˜çº§åŠŸèƒ½">é«˜çº§åŠŸèƒ½</h2>
<h3 id="url-æ„å›¾è¿‡æ»¤å™¨">URL æ„å›¾è¿‡æ»¤å™¨</h3>
<p>é€šè¿‡ <code>AndroidManifest.xml</code> æ·»åŠ æ·±åº¦é“¾æ¥æ”¯æŒã€‚æµ‹è¯•å‘½ä»¤ï¼š</p>
<pre><code class="language-bash">adb shell am start -d &quot;&lt;é“¾æ¥&gt;&quot; -a android.intent.action.VIEW
</code></pre>
<h3 id="æ›´æ–°ç­–ç•¥">æ›´æ–°ç­–ç•¥</h3>
<ul>
<li><code>UpdateStrategy.ALWAYS_UPDATE</code>ï¼šé»˜è®¤ï¼Œå§‹ç»ˆæ›´æ–°ã€‚</li>
<li><code>UpdateStrategy.ONLY_FETCH_ONCE</code>ï¼šä»…é¦–æ¬¡è·å–ï¼Œé€‚ç”¨äºå®Œç»“ä½œå“ã€‚</li>
</ul>
<h3 id="é‡å‘½åç°æœ‰æº">é‡å‘½åç°æœ‰æº</h3>
<p>éœ€ä¿æŒ <code>id</code> ä¸å˜ä»¥é¿å…ç”¨æˆ·è¿ç§»ã€‚ç¤ºä¾‹ï¼š</p>
<pre><code class="language-kotlin">override val id: Long = &lt;æ—§ID&gt;
</code></pre>
<hr>
<h2 id="å¤šæºä¸»é¢˜">å¤šæºä¸»é¢˜</h2>
<p><code>multisrc</code> æ¨¡å—ç”¨äºç”ŸæˆåŸºäºç›¸åŒ CMS çš„å¤šä¸ªæºã€‚ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="language-console">multisrc
â”œâ”€â”€ overrides
â”‚   â””â”€â”€ &lt;ä¸»é¢˜åŒ…&gt;
â”‚       â”œâ”€â”€ default      # é»˜è®¤å›¾æ ‡å’Œé…ç½®
â”‚       â””â”€â”€ &lt;æºåŒ…&gt;       # å•ä¸ªæºçš„è¦†ç›–æ–‡ä»¶
â””â”€â”€ src
    â””â”€â”€ main
        â””â”€â”€ java         # ä¸»é¢˜é»˜è®¤å®ç°å’Œç”Ÿæˆå™¨
</code></pre>
<h3 id="å¼€å‘æµç¨‹">å¼€å‘æµç¨‹</h3>
<ol>
<li><strong>ç”Ÿæˆä»£ç </strong>ï¼š
<ul>
<li>è¿è¡Œä¸»é¢˜ç”Ÿæˆå™¨æˆ–æ‰§è¡Œ <code>./gradlew multisrc:generateExtensions</code>ã€‚</li>
</ul>
</li>
<li><strong>åŒæ­¥ Gradle</strong>ï¼šå¯¼å…¥ç”Ÿæˆçš„æ¨¡å—ã€‚</li>
<li><strong>æµ‹è¯•æ‰©å±•</strong>ï¼šä¸æ™®é€šæ‰©å±•ç›¸åŒã€‚</li>
</ol>
<hr>
<h2 id="è¿è¡Œ">è¿è¡Œ</h2>
<p>åœ¨ Android Studio ä¸­ä½¿ç”¨ä»¥ä¸‹é…ç½®ç›´æ¥å¯åŠ¨åˆ°â€œæµè§ˆâ€ç•Œé¢ï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://i.imgur.com/STy0UFY.png" alt="" loading="lazy"></figure>
<p>è°ƒè¯•ç‰ˆå‘½ä»¤ï¼š</p>
<pre><code>-W -S -n eu.kanade.tachiyomi.debug/eu.kanade.tachiyomi.ui.main.MainActivity -a eu.kanade.tachiyomi.SHOW_CATALOGUES
</code></pre>
<hr>
<h2 id="è°ƒè¯•">è°ƒè¯•</h2>
<h3 id="android-è°ƒè¯•å™¨">Android è°ƒè¯•å™¨</h3>
<p>ä½¿ç”¨ <strong>Attach Debugger to Android Process</strong> é™„åŠ åˆ° Tachiyomi è¿›ç¨‹ã€‚</p>
<h3 id="æ—¥å¿—">æ—¥å¿—</h3>
<p>é€šè¿‡ Android Studio çš„ <strong>Logcat</strong> é¢æ¿æŸ¥çœ‹æ—¥å¿—ï¼Œè¿‡æ»¤ <code>OkHttpClient</code> æ ‡ç­¾ã€‚</p>
<h3 id="ç½‘ç»œæ£€æŸ¥">ç½‘ç»œæ£€æŸ¥</h3>
<p>å¯ç”¨è¯¦ç»†æ—¥å¿—ï¼ˆè®¾ç½® â†’ é«˜çº§ â†’ è¯¦ç»†æ—¥å¿—ï¼‰åï¼Œå¯é€šè¿‡ä»¥ä¸‹æ–¹å¼æ£€æŸ¥è¯·æ±‚ï¼š</p>
<ul>
<li><strong>å†…ç½®ç½‘ç»œåˆ†æå™¨</strong>ï¼šä½¿ç”¨ Android Studio çš„ Network Inspectorã€‚</li>
<li><strong>mitm-proxy</strong>ï¼šè®¾ç½®ä»£ç†å¹¶ç¦ç”¨ SSL éªŒè¯ï¼ˆç¤ºä¾‹ä»£ç è§æ–‡æ¡£ï¼‰ã€‚</li>
</ul>
<hr>
<h2 id="æ„å»º">æ„å»º</h2>
<p>é€šè¿‡ Android Studio ç”Ÿæˆ APKï¼Œæˆ–å‘½ä»¤è¡Œï¼š</p>
<pre><code class="language-bash">./gradlew src:&lt;lang&gt;:&lt;source&gt;:assembleDebug
</code></pre>
<hr>
<h2 id="æäº¤æ›´æ”¹">æäº¤æ›´æ”¹</h2>
<p>æäº¤ Pull Request å‰è¯·ç¡®ä¿ï¼š</p>
<ul>
<li>æ›´æ–° <code>extVersionCode</code> æˆ– <code>overrideVersionCode</code>ã€‚</li>
<li>å¼•ç”¨ç›¸å…³ Issueï¼ˆå¦‚ <code>Closes #xyz</code>ï¼‰ã€‚</li>
<li>æµ‹è¯•ä¿®æ”¹åçš„æ‰©å±•ã€‚</li>
<li>ç§»é™¤è‡ªåŠ¨ç”Ÿæˆçš„ <code>web_hi_res_512.png</code>ã€‚</li>
</ul>
<h3 id="pull-request-æ£€æŸ¥æ¸…å•">Pull Request æ£€æŸ¥æ¸…å•</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-8537187"> æ›´æ–°å•æºçš„ <label class="task-list-item-label" for="task-item-8537187"> æ›´æ–°å•æºçš„ `extVersionCode`</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-5372036"> æ›´æ–°å¤šæºçš„ <code>overrideVersionCode</code> æˆ– <label class="task-list-item-label" for="task-item-5372036"> æ›´æ–°å¤šæºçš„ `overrideVersionCode` æˆ– `baseVersionCode`</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-1697952"><label class="task-list-item-label" for="task-item-1697952"> å…³è”æ‰€æœ‰ç›¸å…³ Issue</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-7916205"> æ ‡è®° <code>isNsfw</code><label class="task-list-item-label" for="task-item-7916205"> æ ‡è®° `isNsfw`ï¼ˆå¦‚é€‚ç”¨ï¼‰</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-488668"><label class="task-list-item-label" for="task-item-488668"> æœªä¿®æ”¹æºåç§°</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-3582403"> ä¿ç•™é‡å‘½åæºçš„ <label class="task-list-item-label" for="task-item-3582403"> ä¿ç•™é‡å‘½åæºçš„ `id`</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-6832543"><label class="task-list-item-label" for="task-item-6832543"> é€šè¿‡ Android Studio ç¼–è¯‘æµ‹è¯•</label></li>
<li class="task-list-item"><input class="task-list-item-checkbox" disabled="" type="checkbox" id="task-item-4630838"> ç§»é™¤æ–°æ‰©å±•çš„ <label class="task-list-item-label" for="task-item-4630838"> ç§»é™¤æ–°æ‰©å±•çš„ `web_hi_res_512.png`</label></li>
</ul>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#%E7%9B%AE%E5%BD%95">ç›®å½•</a></li>
<li><a href="#%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6">å‰ææ¡ä»¶</a>
<ul>
<li><a href="#%E5%B7%A5%E5%85%B7">å·¥å…·</a></li>
<li><a href="#%E5%85%8B%E9%9A%86%E4%BB%93%E5%BA%93">å…‹éš†ä»“åº“</a></li>
<li><a href="#%E6%AD%A5%E9%AA%A4">æ­¥éª¤</a></li>
</ul>
</li>
<li><a href="#%E8%8E%B7%E5%8F%96%E5%B8%AE%E5%8A%A9">è·å–å¸®åŠ©</a></li>
<li><a href="#%E7%BC%96%E5%86%99%E6%89%A9%E5%B1%95">ç¼–å†™æ‰©å±•</a>
<ul>
<li><a href="#%E8%AE%BE%E7%BD%AE%E6%96%B0%E7%9A%84-gradle-%E6%A8%A1%E5%9D%97">è®¾ç½®æ–°çš„ Gradle æ¨¡å—</a></li>
<li><a href="#%E5%8A%A0%E8%BD%BD%E9%83%A8%E5%88%86-gradle-%E6%A8%A1%E5%9D%97">åŠ è½½éƒ¨åˆ† Gradle æ¨¡å—</a>
<ul>
<li><a href="#%E6%89%A9%E5%B1%95%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84">æ‰©å±•æ–‡ä»¶ç»“æ„</a></li>
<li><a href="#buildgradle-%E7%BB%93%E6%9E%84">build.gradle ç»“æ„</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%A0%B8%E5%BF%83%E4%BE%9D%E8%B5%96">æ ¸å¿ƒä¾èµ–</a>
<ul>
<li><a href="#%E6%89%A9%E5%B1%95-api">æ‰©å±• API</a></li>
<li><a href="#%E5%85%B6%E4%BB%96%E5%BA%93">å…¶ä»–åº“</a></li>
</ul>
</li>
<li><a href="#%E6%89%A9%E5%B1%95%E4%B8%BB%E7%B1%BB">æ‰©å±•ä¸»ç±»</a>
<ul>
<li><a href="#%E5%85%B3%E9%94%AE%E5%AD%97%E6%AE%B5">å…³é”®å­—æ®µ</a></li>
</ul>
</li>
<li><a href="#%E6%89%A9%E5%B1%95%E8%B0%83%E7%94%A8%E6%B5%81%E7%A8%8B">æ‰©å±•è°ƒç”¨æµç¨‹</a>
<ul>
<li><a href="#%E7%83%AD%E9%97%A8%E6%BC%AB%E7%94%BBpopular-manga">çƒ­é—¨æ¼«ç”»ï¼ˆPopular Mangaï¼‰</a></li>
<li><a href="#%E6%9C%80%E6%96%B0%E6%BC%AB%E7%94%BBlatest-manga">æœ€æ–°æ¼«ç”»ï¼ˆLatest Mangaï¼‰</a></li>
<li><a href="#%E6%BC%AB%E7%94%BB%E6%90%9C%E7%B4%A2manga-search">æ¼«ç”»æœç´¢ï¼ˆManga Searchï¼‰</a></li>
<li><a href="#%E6%BC%AB%E7%94%BB%E8%AF%A6%E6%83%85manga-details">æ¼«ç”»è¯¦æƒ…ï¼ˆManga Detailsï¼‰</a></li>
</ul>
</li>
<li><a href="#%E9%AB%98%E7%BA%A7%E5%8A%9F%E8%83%BD">é«˜çº§åŠŸèƒ½</a>
<ul>
<li><a href="#url-%E6%84%8F%E5%9B%BE%E8%BF%87%E6%BB%A4%E5%99%A8">URL æ„å›¾è¿‡æ»¤å™¨</a></li>
<li><a href="#%E6%9B%B4%E6%96%B0%E7%AD%96%E7%95%A5">æ›´æ–°ç­–ç•¥</a></li>
<li><a href="#%E9%87%8D%E5%91%BD%E5%90%8D%E7%8E%B0%E6%9C%89%E6%BA%90">é‡å‘½åç°æœ‰æº</a></li>
</ul>
</li>
<li><a href="#%E5%A4%9A%E6%BA%90%E4%B8%BB%E9%A2%98">å¤šæºä¸»é¢˜</a>
<ul>
<li><a href="#%E5%BC%80%E5%8F%91%E6%B5%81%E7%A8%8B">å¼€å‘æµç¨‹</a></li>
</ul>
</li>
<li><a href="#%E8%BF%90%E8%A1%8C">è¿è¡Œ</a></li>
<li><a href="#%E8%B0%83%E8%AF%95">è°ƒè¯•</a>
<ul>
<li><a href="#android-%E8%B0%83%E8%AF%95%E5%99%A8">Android è°ƒè¯•å™¨</a></li>
<li><a href="#%E6%97%A5%E5%BF%97">æ—¥å¿—</a></li>
<li><a href="#%E7%BD%91%E7%BB%9C%E6%A3%80%E6%9F%A5">ç½‘ç»œæ£€æŸ¥</a></li>
</ul>
</li>
<li><a href="#%E6%9E%84%E5%BB%BA">æ„å»º</a></li>
<li><a href="#%E6%8F%90%E4%BA%A4%E6%9B%B4%E6%94%B9">æäº¤æ›´æ”¹</a>
<ul>
<li><a href="#pull-request-%E6%A3%80%E6%9F%A5%E6%B8%85%E5%8D%95">Pull Request æ£€æŸ¥æ¸…å•</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        

        

        <div class="site-footer">
  Powered by&nbsp;<a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://hualiang.online/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
